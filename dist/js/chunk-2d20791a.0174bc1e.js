(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20791a"],{a0a6:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ABSListVuex",{attrs:{prop:t.propList,title:t.data.QueryName},on:{rowClicked:t.$parent.rowClicked,rowDblClicked:t.$parent.doDoubleClick,rowLinkClick:t.$parent.rowLink,pageSize:t.$parent.M_PageSize,pagination:t.$parent.M_Pagination,filter:t.$parent.M_Advance_Filter,headTable:t.$parent.M_Head_Table,refreshColumn:t.$parent.refreshColumn}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.$parent.showForm,expression:"$parent.showForm"}],staticClass:"el",style:"margin-top:10px;",attrs:{mousetip:"","mousetip-msg":"I'm a tooltip"}},[a("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse1",modifiers:{collapse1:!0}}],staticClass:"div-collapse"},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.IEBy.Input&&t.IEBy.Edit,expression:"IEBy.Input && IEBy.Edit"}],staticClass:"master-span"},[t._v("\n                    Input By : "+t._s(t.IEBy.Input)+" | Edit By : "+t._s(t.IEBy.Edit)+" "),a("font-awesome-icon",{staticClass:"icon-style-1__master",attrs:{icon:"sort-down"}})],1)]),a("b-collapse",{attrs:{id:"collapse1",visible:!0}},[a("b-row",{staticStyle:{"padding-left":"10px","padding-bottom":"10px"}},[a("b-col",{staticClass:"bColMasterForm",attrs:{md:"12",id:"col-left"}},[a("b-form",{attrs:{"data-vv-scope":"FormScope_"+t.PageLevel+"_"+t.TabIndex,"data-vv-value-path":"FormScope_"+t.PageLevel+"_"+t.TabIndex}},[a("b-row",{staticStyle:{"padding-left":"10px"}},[a("b-col",{attrs:{md:"12",id:"col-left"}},[a("b-row",[a("b-col",{attrs:{md:"6"}},[a("ABSinputTextVuex",{ref:"ref_debitno",attrs:{prop:t.PI_debitno},model:{value:t.M_AR_CNAllocationD.debitno,callback:function(e){t.$set(t.M_AR_CNAllocationD,"debitno",e)},expression:"M_AR_CNAllocationD.debitno"}})],1)],1),a("b-row",[a("b-col",{attrs:{md:"6"}},[a("ABSinputTextVuex",{ref:"ref_trxtype",attrs:{prop:t.PI_trxtype},model:{value:t.M_AR_CNAllocationD.trxtype,callback:function(e){t.$set(t.M_AR_CNAllocationD,"trxtype",e)},expression:"M_AR_CNAllocationD.trxtype"}})],1)],1),a("b-row",[a("b-col",{attrs:{md:"6"}},[a("ABSinputTextVuex",{ref:"ref_headerdescs",attrs:{prop:t.PI_headerdescs},model:{value:t.M_AR_CNAllocationD.headerdescs,callback:function(e){t.$set(t.M_AR_CNAllocationD,"headerdescs",e)},expression:"M_AR_CNAllocationD.headerdescs"}})],1)],1),a("b-row",[a("b-col",{attrs:{md:"6"}},[a("ABSinputTextVuex",{ref:"ref_descs",attrs:{prop:t.PI_descs},model:{value:t.M_AR_CNAllocationD.descs,callback:function(e){t.$set(t.M_AR_CNAllocationD,"descs",e)},expression:"M_AR_CNAllocationD.descs"}})],1)],1),a("b-row",[a("b-col",{attrs:{md:"6"}},[a("ABSinputRadioButtonVuex",{ref:"ref_vatpaidby",attrs:{prop:t.PI_vatpaidby},on:{input:t.OnvatpaidbyChange},model:{value:t.M_AR_CNAllocationD.vatpaidby,callback:function(e){t.$set(t.M_AR_CNAllocationD,"vatpaidby",e)},expression:"M_AR_CNAllocationD.vatpaidby"}})],1),a("b-col",{attrs:{md:"6"}},[a("ABSinputRadioButtonVuex",{ref:"ref_withholdingpaidby",attrs:{prop:t.PI_withholdingpaidby},on:{input:t.OnwithholdingpaidbyChange},model:{value:t.M_AR_CNAllocationD.withholdingpaidby,callback:function(e){t.$set(t.M_AR_CNAllocationD,"withholdingpaidby",e)},expression:"M_AR_CNAllocationD.withholdingpaidby"}})],1)],1),a("b-row",[a("b-col",{attrs:{md:"6"}},[a("ABSinputTextVuex",{ref:"ref_outstandingamt",attrs:{prop:t.PI_outstandingamt},model:{value:t.M_AR_CNAllocationD.outstandingamt,callback:function(e){t.$set(t.M_AR_CNAllocationD,"outstandingamt",e)},expression:"M_AR_CNAllocationD.outstandingamt"}})],1),a("b-col",{attrs:{md:"6"}},[a("ABSinputTextVuex",{ref:"ref_totalallocatedamt",attrs:{prop:t.PI_totalallocatedamt},on:{input:t.OntotalallocateamtChange},model:{value:t.M_AR_CNAllocationD.totalallocatedamt,callback:function(e){t.$set(t.M_AR_CNAllocationD,"totalallocatedamt",e)},expression:"M_AR_CNAllocationD.totalallocatedamt"}})],1)],1),a("b-row",[a("b-col",{attrs:{md:"6",offset:"10"}},[a("ABSinputCheckBoxOnly",{ref:"ref_fullallocate",attrs:{prop:t.PI_fullallocate},on:{input:t.OnfullallocateChange},model:{value:t.M_AR_CNAllocationD.fullallocate,callback:function(e){t.$set(t.M_AR_CNAllocationD,"fullallocate",e)},expression:"M_AR_CNAllocationD.fullallocate"}})],1)],1),a("b-row",[a("b-col",{attrs:{md:"6"}},[a("ABSinputTextVuex",{ref:"ref_debitcurrencycd",attrs:{prop:t.PI_debitcurrencycd},model:{value:t.M_AR_CNAllocationD.debitcurrencycd,callback:function(e){t.$set(t.M_AR_CNAllocationD,"debitcurrencycd",e)},expression:"M_AR_CNAllocationD.debitcurrencycd"}})],1),a("b-col",{attrs:{md:"6"}},[a("ABSinputRadioButtonVuex",{ref:"ref_operator",attrs:{prop:t.PI_operator},on:{input:t.OnoperatorChange},model:{value:t.M_AR_CNAllocationD.operator,callback:function(e){t.$set(t.M_AR_CNAllocationD,"operator",e)},expression:"M_AR_CNAllocationD.operator"}})],1)],1),a("div",{staticClass:"div-collapse"},[a("b-row",[a("b-col",{attrs:{md:"2"}}),a("b-col",{attrs:{md:"2"}},[a("ABSLabelOnly",{attrs:{prop:{cLabel:"Outstanding Amount",cLabelSize:4,cValue:"",cPageLevel:t.PageLevel,cTabIndex:t.TabIndex,cVisible:!0,cClass:"lbl-col-align"}}})],1),a("b-col",{attrs:{md:"2"}},[a("ABSLabelOnly",{attrs:{prop:{cLabel:"Currency Rate",cLabelSize:4,cValue:"",cPageLevel:t.PageLevel,cTabIndex:t.TabIndex,cVisible:!0,cClass:"lbl-col-align"}}})],1),a("b-col",{attrs:{md:"2"}},[a("ABSLabelOnly",{attrs:{prop:{cLabel:"Allocation Amount",cLabelSize:4,cValue:"",cPageLevel:t.PageLevel,cTabIndex:t.TabIndex,cVisible:!0,cClass:"lbl-col-align"}}})],1),a("b-col",{attrs:{md:"2"}},[a("ABSLabelOnly",{attrs:{prop:{cLabel:"Allocation Currency Rate",cLabelSize:4,cValue:"",cPageLevel:t.PageLevel,cTabIndex:t.TabIndex,cVisible:!0,cClass:"lbl-col-align"}}})],1)],1)],1),t._l(t.DebitCharge,function(e,i){return a("b-row",{key:i},[a("b-col",{attrs:{md:"2"}},[a("ABSLabelOnly",{attrs:{prop:e.props.label}})],1),a("b-col",{directives:[{name:"show",rawName:"v-show",value:"VIEW"!==t.inputStatus,expression:"inputStatus!=='VIEW'"}],attrs:{md:"2"}},[a("b-form-input",{ref:"ref_outstanding_"+(i+1),refInFor:!0,staticClass:"text-field-form form-control input",staticStyle:{"text-align":"right"},attrs:{name:e.props.outstanding.cName,id:e.props.outstanding.cName,rowLine:"0",type:"text",disabled:"disabled"},on:{input:function(a){t.handleInput(i,e.data.outstanding,"outstanding")},blur:function(a){t.onBlur("outstanding",e.data.outstanding)}},nativeOn:{keypress:function(a){t.formatNumber(a,i,e.data.outstanding,"outstanding")},blur:function(a){t.isCurrency2(i,e.data.outstanding,"outstanding")}},model:{value:e.data.outstanding,callback:function(a){t.$set(e.data,"outstanding",a)},expression:"data.data.outstanding"}})],1),"VIEW"==t.inputStatus&&"decimal"==e.props.outstanding.cType?a("b-col",{staticStyle:{"text-align":"right !important"},attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.outstanding))])]):"VIEW"==t.inputStatus&&"numeric"==e.props.outstanding.cType?a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.outstanding))])]):"VIEW"==t.inputStatus?a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.outstanding))])]):t._e(),a("b-col",{directives:[{name:"show",rawName:"v-show",value:"VIEW"!==t.inputStatus,expression:"inputStatus!=='VIEW'"}],attrs:{md:"2"}},[a("b-form-input",{ref:"ref_currencyrate_"+(i+1),refInFor:!0,staticClass:"text-field-form form-control input",staticStyle:{"text-align":"right"},attrs:{name:e.props.currencyrate.cName,id:e.props.currencyrate.cName,rowLine:"0",type:"text",disabled:"disabled"},on:{input:function(a){t.handleInput(i,e.data.currencyrate,"currencyrate")},blur:function(a){t.onBlur("currencyrate",i,e.data.currencyrate)}},nativeOn:{keypress:function(a){t.formatNumber(a,i,e.data.currencyrate,"currencyrate")},blur:function(a){t.isCurrency2(i,e.data.currencyrate,"currencyrate")}},model:{value:e.data.currencyrate,callback:function(a){t.$set(e.data,"currencyrate",a)},expression:"data.data.currencyrate"}})],1),"VIEW"==t.inputStatus&&"decimal"==e.props.currencyrate.cType?a("b-col",{staticStyle:{"text-align":"right !important"},attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.currencyrate))])]):"VIEW"==t.inputStatus&&"numeric"==e.props.currencyrate.cType?a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.currencyrate))])]):"VIEW"==t.inputStatus?a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.currencyrate))])]):t._e(),a("b-col",{directives:[{name:"show",rawName:"v-show",value:"VIEW"!==t.inputStatus,expression:"inputStatus!=='VIEW'"}],attrs:{md:"2"}},[a("b-form-input",{ref:"ref_allocamt_"+(i+1),refInFor:!0,staticClass:"text-field-form form-control input",staticStyle:{"text-align":"right"},attrs:{name:e.props.allocamt.cName,id:e.props.allocamt.cName,rowLine:"0",type:"text"},on:{input:function(a){t.handleInput(i,e.data.allocamt,"allocamt")},blur:function(a){t.onBlur("allocamt",i,e.data.allocamt)}},nativeOn:{keypress:function(a){t.formatNumber(a,i,e.data.allocamt,"allocamt")},blur:function(a){t.isCurrency2(i,e.data.allocamt,"allocamt")}},model:{value:e.data.allocamt,callback:function(a){t.$set(e.data,"allocamt",a)},expression:"data.data.allocamt"}})],1),"VIEW"==t.inputStatus&&"decimal"==e.props.allocamt.cType?a("b-col",{staticStyle:{"text-align":"right !important"},attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.allocamt))])]):"VIEW"==t.inputStatus&&"numeric"==e.props.allocamt.cType?a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.allocamt))])]):"VIEW"==t.inputStatus?a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.allocamt))])]):t._e(),a("b-col",{directives:[{name:"show",rawName:"v-show",value:"VIEW"!==t.inputStatus,expression:"inputStatus!=='VIEW'"}],attrs:{md:"2"}},[a("b-form-input",{ref:"ref_alloccurrencyrate_"+(i+1),refInFor:!0,staticClass:"text-field-form form-control input",staticStyle:{"text-align":"right"},attrs:{name:e.props.alloccurrencyrate.cName,id:e.props.alloccurrencyrate.cName,rowLine:"0",type:"text",disabled:"disabled"},on:{input:function(a){t.handleInput(i,e.data.alloccurrencyrate,"alloccurrencyrate")},blur:function(a){t.onBlur("alloccurrencyrate",i,e.data.alloccurrencyrate)}},nativeOn:{keypress:function(a){t.formatNumber(a,i,e.data.alloccurrencyrate,"alloccurrencyrate")},blur:function(a){t.isCurrency2(i,e.data.alloccurrencyrate,"alloccurrencyrate")}},model:{value:e.data.alloccurrencyrate,callback:function(a){t.$set(e.data,"alloccurrencyrate",a)},expression:"data.data.alloccurrencyrate"}})],1),"VIEW"==t.inputStatus&&"decimal"==e.props.alloccurrencyrate.cType?a("b-col",{staticStyle:{"text-align":"right !important"},attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.alloccurrencyrate))])]):"VIEW"==t.inputStatus&&"numeric"==e.props.alloccurrencyrate.cType?a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.alloccurrencyrate))])]):"VIEW"==t.inputStatus?a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.alloccurrencyrate))])]):t._e()],1)}),a("b-row",[a("b-col",{attrs:{md:"6"}},[a("ABSTextAreaVuex",{ref:"ref_remarks",attrs:{prop:t.PI_remarks},on:{input:t.OnremarksChange},model:{value:t.M_AR_CNAllocationD.remarks,callback:function(e){t.$set(t.M_AR_CNAllocationD,"remarks",e)},expression:"M_AR_CNAllocationD.remarks"}})],1)],1)],2)],1),a("ABSTAnalysis",{attrs:{prop:t.PTAnalysis}})],1)],1)],1)],1)],1)],1)},r=[],o=(a("a481"),a("28a5"),a("6b54"),a("ade3")),l={props:{PageLevel:"",TabIndex:"",data:""},data:function(){var t;return{ValKey:null,FormType:"List",Module:"AR",propList:{initialWhere:"",LineNo:this.$parent.data.PageOrder,PageLevel:this.PageLevel,TabIndex:this.TabIndex,OrderBy:"",SourceField:"",ParamView:"'"+this.getDataUser().SubPortfolioCd+"','','',''"},IEBy:{Input:"",Edit:""},CreditSequenceNoOutput:0,M_AR_CNAllocationD:(t={autounderover:"",journalcategory:"",debitno:"",trxtype:"",descs:"",headerdescs:"",currencycd:"",currencyrate:"",vatpaidby:"",withholdingpaidby:"",taxcurrencyrate:"",remarks:"",totalallocatedamt:"0",currentcurrencyrate:"",currenttaxcurrencyrate:"",operator:"",taxcd:"",rowid:0,lastupdatestamp:0,toutstandingamt:"",detailoutstandingamt:"",detailcurrencyrate:"",detailallocamt:"",outstandingamt:"",fullallocate:""},Object(o["a"])(t,"detailoutstandingamt",""),Object(o["a"])(t,"debitcurrencycd",""),Object(o["a"])(t,"debitcurrencyrate",""),Object(o["a"])(t,"allocationamt","0"),Object(o["a"])(t,"creditcurrencyrate","0"),t),PI_debitno:{cValidate:"",cLabel:"Doc. No",cLabelSize:4,cValue:"",cOrder:1,cKey:!1,cVisible:!0,cProtect:!0,cDefault:"",cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_trxtype:{cValidate:"",cLabel:"Trans. Type",cLabelSize:4,cValue:"",cOrder:2,cKey:!1,cVisible:!0,cProtect:!0,cDefault:"",cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_headerdescs:{cValidate:"",cLabel:"Description",cLabelSize:4,cValue:"",cOrder:3,cKey:!1,cVisible:!0,cProtect:!0,cDefault:"",cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_descs:{cValidate:"",cLabel:"Detail Description",cLabelSize:4,cValue:"",cOrder:4,cKey:!1,cVisible:!0,cProtect:!0,cDefault:"",cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_vatpaidby:{cValidate:"",cName:"vatpaidby",cId:"rdbvatpaidby",cRadioOptions:[{text:"Debtor",value:"D"},{text:"Management",value:"M"}],cRadioDefaultOption:"",cLabel:"VAT Paid By",cLabelSize:4,cOrder:5,cProtect:!0,cVisible:!0,cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_withholdingpaidby:{cValidate:"",cName:"withholdingpaidby",cId:"rdbwithholdingpaidby",cRadioOptions:[{text:"Debtor",value:"D"},{text:"Management",value:"M"}],cRadioDefaultOption:"",cLabel:"Withholding Paid By   ",cLabelSize:4,cOrder:6,cProtect:!1,cKey:!0,cVisible:!0,cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_outstandingamt:{cLabel:"Outstanding Amount",cLabelSize:4,cValue:"",cType:"decimal",cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cVisible:!0},PI_totalallocatedamt:{cValidate:"",cName:"totalallocatedamt",cLabel:"Allocation Amount",cLabelSize:4,cOrder:7,cKey:!1,cType:"decimal",cVisible:!0,cProtect:!1,cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_fullallocate:{cValidate:"",cName:"fullallocate",cLabel:"",cLabelSize:4,cOptions:[{text:"",value:"Y"}],cOrder:8,cKey:!1,cVisible:!0,cProtect:!1,cDefault:"",cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_debitcurrencycd:{cValidate:"",cLabel:"Currency",cLabelSize:4,cValue:"",cOrder:9,cKey:!1,cVisible:!0,cProtect:!0,cDefault:"",cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_operator:{cValidate:"",cName:"operator",cId:"rdboperator",cRadioOptions:[{text:"Multiply (*)",value:"*"},{text:"Divide (/)",value:"/"}],cRadioDefaultOption:"",cLabel:"Operator",cLabelSize:4,cOrder:10,cProtect:!1,cKey:!0,cVisible:!0,cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_detailoutstandingamt:{cLabel:"",cLabelSize:4,cValue:"",cType:"decimal",cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cVisible:!0,cProtect:!0},PI_detailcurrencyrate:{cLabel:"",cLabelSize:4,cValue:"",cType:"decimal",cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cVisible:!0,cProtect:!0},PI_detailallocamt:{cValidate:"",cName:"allocationamt",cLabel:"",cLabelSize:4,cOrder:11,cKey:!1,cType:"decimal",cVisible:!0,cProtect:!1,cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_detailalloccurrencyamt:{cValidate:"",cName:"creditcurrencyrate",cLabel:"",cLabelSize:4,cOrder:12,cKey:!1,cType:"decimal",cVisible:!0,cProtect:!0,cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_remarks:{cValidate:"",cName:"remarks",cLabel:"Remarks",cLabelSize:4,cOrder:13,cKey:!1,cDefault:"",cProtect:!1,cVisible:!0,cResize:!1,cReadOnly:!1,cRows:3,cMaxRows:3,cSize:"md",cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PTAnalysis:{cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cPageMasterSeq:this.data.PageMasterSeq,cFormPageNo:this.data.PageOrder},DataDetail:null,DebitCharge:[],TotalCharge:0,FnAllocationAmt:0,BaseCurrencyCd:""}},computed:{inputStatus:function(){return this.$store.getters.getLevel==this.PageLevel&&this.$store.getters.getTab==this.TabIndex?this.$store.getters.getStatus.toUpperCase():"VIEW"},DataRow:function(){return this.$store.getters.GetPage2Data},DataRowPage1:function(){return this.$store.getters.GetPage1Data}},methods:{OnvatpaidbyChange:function(t){var e=this;this.$nextTick(function(){e.inputStatus}),this.$forceUpdate()},OnwithholdingpaidbyChange:function(t){var e=this;this.$nextTick(function(){e.inputStatus}),this.$forceUpdate()},OnfullallocateChange:function(t){var e=this;this.$nextTick(function(){if("VIEW"!=e.inputStatus)if("Y"==t){e.M_AR_CNAllocationD.totalallocatedamt=e.TotalCharge;for(var a=0;a<e.DebitCharge.length;a++)e.DebitCharge[a].data.allocamt=e.DebitCharge[a].data.outstanding}else{e.M_AR_CNAllocationD.totalallocatedamt="";for(var i=0;i<e.DebitCharge.length;i++)e.DebitCharge[i].data.allocamt=""}}),this.$forceUpdate()},OnoperatorChange:function(t){var e=this;this.$nextTick(function(){e.inputStatus}),this.$forceUpdate()},OnremarksChange:function(t){var e=this;this.$nextTick(function(){e.inputStatus}),this.$forceUpdate()},setToolbarButton:function(){this.getToolbar().statusFunction[0].disabled=!0},M_Head_Table:function(){},M_PageSize:function(){},M_TabClick:function(){},M_Pagination:function(){},M_Advance_Filter:function(){},M_Search:function(t){},M_Refresh:function(){},M_Cancel:function(){},doDoubleClick:function(){},rowClicked:function(t,e){},rowLink:function(t){this.$refs.modalTest.show()},paramFromParent:function(){this.$parent.showForm=!1;var t=this.$store.getters.GetPage1Data;this.propList.ParamView="'"+this.getDataUser().SubPortfolioCd+"','"+t.DebtorCd+"','"+t.CreditNo+"','"+t.CurrencyCd+"'",this.FormToABSList().doGetList("","eb_getList")},M_Insert:function(){},M_InsertOR:function(){for(var t=this,e=0,a=0;a<this.DebitCharge.length;a++)e+=parseFloat(this.replaceAllString(this.DebitCharge[a].data.allocamt?this.DebitCharge[a].data.allocamt:0,",","","number"));var i=[],r={_Method_:"UPDATE",_LineNo_:this.$parent.data.PageOrder,CreditSequenceNoOutput_output:this.DataRow.CreditSequenceNo,SubportfolioCd:this.getDataUser().SubPortfolioCd,DebitNo:this.M_AR_CNAllocationD.debitno,DebitSequenceNo:this.DataRow.DebitSequenceNo,CreditNo:this.DataRowPage1.CreditNo,CreditSequenceNo:this.DataRow.CreditSequenceNo,VatPaidByManagement:"M"==this.M_AR_CNAllocationD.vatpaidby?"Y":"N",VatPaidByDebtor:"D"==this.M_AR_CNAllocationD.vatpaidby?"Y":"N",WithHoldingPaidByManagement:"M"==this.M_AR_CNAllocationD.withholdingpaidby?"Y":"N",WithHoldingPaidByDebtor:"D"==this.M_AR_CNAllocationD.withholdingpaidby?"Y":"N",JournalCategory:this.M_AR_CNAllocationD.journalcategory,AllocationAmt:e,CurrencyOperator:this.M_AR_CNAllocationD.operator,Remarks:this.M_AR_CNAllocationD.remarks,UserInput:this.getDataUser().UserId};if("D"==this.M_AR_CNAllocationD.journalcategory)for(var o=[],l=0;l<this.DataDetail.length;l++)o.push({_Method_:"SAVE",_LineNo_:this.$parent.data.PageOrder,CreditSequenceNo:"CreditSequenceNoOutput",DebitDetailSequenceNo:this.DataDetail[l].DebitDetailSequenceNo,CurrencyOperator:this.M_AR_CNAllocationD.operator,DebitCurrencyCd:this.M_AR_CNAllocationD.debitcurrencycd,CreditCurrencyCd:this.DataRowPage1.CurrencyCd,DebitCurrencyRate:this.DataDetail[l].CurrencyRate,CreditCurrencyRate:this.DataDetail[l].AllocationCurrencyRate,AllocationAmt:this.DebitCharge[l].data.allocamt,UserInput:this.getDataUser().UserId});else for(var c=0;c<this.DataDetail.length;c++)o.push({_Method_:"SAVE",_LineNo_:3,CreditSequenceNo:"CreditSequenceNoOutput",DebitDetailSequenceNo:this.DataDetail[c].DebitDetailSequenceNo,DebitCurrencyCd:this.M_AR_CNAllocationD.debitcurrencycd,CreditCurrencyCd:this.DataRowPage1.CurrencyCd,BaseCurrencyCd:this.BaseCurrencyCd,VATPaidBy:this.M_AR_CNAllocationD.vatpaidby,WithholdingPaidBy:this.M_AR_CNAllocationD.withholdingpaidby,CreditCurrencyRate:this.DataDetail[c].AllocationCurrencyRate,TotalAllocationAmt:e,CurrencyOperator:this.M_AR_CNAllocationD.operator,TaxCd:this.M_AR_CNAllocationD.taxcd,TaxType:this.DataDetail[c].TaxType,TaxClass:this.DataDetail[c].TaxTypeDescs,UserInput:this.getDataUser().UserId});var n={_Method_:"UPDATE2",_LineNo_:this.$parent.data.PageOrder,SubPortfolioCd:this.getDataUser().SubPortfolioCd,CreditSequenceNo:"CreditSequenceNoOutput",CreditNo:this.DataRowPage1.CreditNo,CurrencyOperator:this.M_AR_CNAllocationD.operator,Remarks:this.M_AR_CNAllocationD.remarks,UserEdit:this.getDataUser().UserId};i.push({A_Insert_1:r,B_looping_1:o,C_Insert_2:n});var s={OptionSeq:this.getOptionSeq().OptionSeq,LineNo:this.$parent.data.PageOrder,Data:i};this.postJSONMulti(this.getUrlProsesDataPostMulti(),s).then(function(e){null!=e&&t.$parent.resultUpdate("Data Successfully Saved")})},M_UpdateOR:function(){for(var t=this,e=0,a=0;a<this.DebitCharge.length;a++)e+=parseFloat(this.replaceAllString(this.DebitCharge[a].data.allocamt,",","","number"));for(var i=[],r=[],l={_Method_:"UPDATE",_LineNo_:this.$parent.data.PageOrder,CreditSequenceNoOutput_output:this.DataRow.CreditSequenceNo,SubportfolioCd:this.getDataUser().SubPortfolioCd,DebitNo:this.M_AR_CNAllocationD.debitno,DebitSequenceNo:this.DataRow.DebitSequenceNo,CreditNo:this.DataRowPage1.CreditNo,CreditSequenceNo:this.DataRow.CreditSequenceNo,VatPaidByManagement:"M"==this.M_AR_CNAllocationD.vatpaidby?"Y":"N",VatPaidByDebtor:"D"==this.M_AR_CNAllocationD.vatpaidby?"Y":"N",WithHoldingPaidByManagement:"M"==this.M_AR_CNAllocationD.withholdingpaidby?"Y":"N",WithHoldingPaidByDebtor:"D"==this.M_AR_CNAllocationD.withholdingpaidby?"Y":"N",JournalCategory:this.M_AR_CNAllocationD.journalcategory,AllocationAmt:e,CurrencyOperator:this.M_AR_CNAllocationD.operator,Remarks:this.M_AR_CNAllocationD.remarks,UserInput:this.getDataUser().UserId},c=0;c<this.DataDetail.length;c++){var n;if("D"==this.M_AR_CNAllocationD.journalcategory){if(0!=this.DataDetail[c].CreditDetailSequenceNo)i.push((n={_Method_:"UPDATE",_LineNo_:3,CreditDetailSequenceNo:this.DataDetail[c].CreditDetailSequenceNo,UserEdit:this.getDataUser().UserId,DebitDetailSequenceNo:this.DataDetail[c].DebitDetailSequenceNo,CurrencyOperator:this.M_AR_CNAllocationD.operator,DebitCurrencyCd:this.M_AR_CNAllocationD.debitcurrencycd,CreditCurrencyCd:this.DataRowPage1.CurrencyCd},Object(o["a"])(n,"DebitCurrencyCd",this.M_AR_CNAllocationD.debitcurrencycd),Object(o["a"])(n,"CreditCurrencyCd",this.DataRowPage1.CurrencyCd),Object(o["a"])(n,"DebitCurrencyRate",this.DataDetail[c].CurrencyRate),Object(o["a"])(n,"CreditCurrencyRate",this.DataDetail[c].AllocationCurrencyRate),Object(o["a"])(n,"AllocationAmt",this.DebitCharge[c].data.allocamt),n));else if(0!=this.DebitCharge[c].data.allocamt){var s;i.push((s={_Method_:"SAVE",_LineNo_:this.$parent.data.PageOrder,CreditSequenceNo:this.DataRow.CreditSequenceNo,UserInput:this.getDataUser().UserId,DebitDetailSequenceNo:this.DataDetail[c].DebitDetailSequenceNo,CurrencyOperator:this.M_AR_CNAllocationD.operator,DebitCurrencyCd:this.M_AR_CNAllocationD.debitcurrencycd,CreditCurrencyCd:this.DataRowPage1.CurrencyCd},Object(o["a"])(s,"DebitCurrencyCd",this.M_AR_CNAllocationD.debitcurrencycd),Object(o["a"])(s,"CreditCurrencyCd",this.DataRowPage1.CurrencyCd),Object(o["a"])(s,"DebitCurrencyRate",this.DataDetail[c].CurrencyRate),Object(o["a"])(s,"CreditCurrencyRate",this.DataDetail[c].AllocationCurrencyRate),Object(o["a"])(s,"AllocationAmt",this.DebitCharge[c].data.allocamt),s))}}else i.push({_Method_:"UPDATE3",_LineNo_:3,CreditDetailSequenceNo:this.DataDetail[c].CreditDetailSequenceNo,CreditSequenceNo:this.DataRow.CreditSequenceNo,DebitDetailSequenceNo:this.DataDetail[c].DebitDetailSequenceNo,TotalAllocationAmt:e,DebitCurrencyCd:this.M_AR_CNAllocationD.debitcurrencycd,CreditCurrencyCd:this.DataRowPage1.CurrencyCd,BaseCurrencyCd:this.BaseCurrencyCd,VATPaidBy:this.M_AR_CNAllocationD.vatpaidby,WithholdingPaidBy:this.M_AR_CNAllocationD.withholdingpaidby,CreditCurrencyRate:this.DataDetail[c].AllocationCurrencyRate,CurrencyOperator:this.M_AR_CNAllocationD.operator,TaxCd:this.M_AR_CNAllocationD.taxcd,TaxType:this.DataDetail[c].TaxType,TaxClass:this.DataDetail[c].TaxTypeDescs,UserEdit:this.getDataUser().UserId})}var d={_Method_:"UPDATE2",_LineNo_:this.$parent.data.PageOrder,SubPortfolioCd:this.getDataUser().SubPortfolioCd,CreditSequenceNo:this.DataRow.CreditSequenceNo,CreditNo:this.DataRowPage1.CreditNo,CurrencyOperator:this.M_AR_CNAllocationD.operator,Remarks:this.M_AR_CNAllocationD.remarks,UserEdit:this.getDataUser().UserId};r.push({A_Insert_1:l,B_looping_1:i,C_Insert_2:d});var u={OptionSeq:this.getOptionSeq().OptionSeq,LineNo:this.$parent.data.PageOrder,Data:r};this.postJSONMulti(this.getUrlProsesDataPostMulti(),u).then(function(e){null!=e&&t.$parent.resultUpdate("Data Successfully Saved")})},M_Update:function(){var t=this;if(0==this.DataRow.CreditSequenceNo){var e={OptionFunctionCd:"CheckCreditNoteChargeToInvoiceD",ModuleCd:this.Module,SequenceNo:this.DataRow.DebitSequenceNo};this.FnDynamicFunction(e).then(function(e){!e||e.length>0?t.alertError("Cannot Edit Data, Invoice has already change to CN"):t.M_InsertOR()})}else this.M_UpdateOR()},M_UpdateOLD:function(){var t=this,e={OptionSeq:this.getOptionSeq().OptionSeq,LineNo:this.$parent.data.PageOrder,CreditSequenceNoOutput_output:this.DataRow.CreditSequenceNo,SubportfolioCd:this.getDataUser().SubPortfolioCd,DebitNo:this.M_AR_CNAllocationD.debitno,DebitSequenceNo:this.DataRow.DebitSequenceNo,CreditNo:this.DataRowPage1.CreditNo,CreditSequenceNo:this.DataRow.CreditSequenceNo,VatPaidByManagement:"M"==this.M_AR_CNAllocationD.vatpaidby?"Y":"N",VatPaidByDebtor:"D"==this.M_AR_CNAllocationD.vatpaidby?"Y":"N",WithHoldingPaidByManagement:"M"==this.M_AR_CNAllocationD.withholdingpaidby?"Y":"N",WithHoldingPaidByDebtor:"D"==this.M_AR_CNAllocationD.withholdingpaidby?"Y":"N",JournalCategory:this.M_AR_CNAllocationD.journalcategory,AllocationAmt:this.M_AR_CNAllocationD.totalallocatedamt,CurrencyOperator:this.M_AR_CNAllocationD.operator,Remarks:this.M_AR_CNAllocationD.remarks,UserInput:this.getDataUser().UserId};this.postJSON(this.getUrlUpdate(),e).then(function(e){null!=e&&(t.CreditSequenceNoOutput=0==e.Data.CreditSequenceNoOutput_output?t.DataRow.CreditSequenceNo:e.Data.CreditSequenceNoOutput_output,t.M_Update2())})},M_Update2:function(){var t=this,e={},a={},i="",r="",l=this.$parent.data.PageOrder,c=this.$parent.data.PageOrder;if(0==this.DataRow.CreditSequenceNo)if("D"==this.M_AR_CNAllocationD.journalcategory){i=this.getUrlInsertMulti(),"I";for(var n=[],s=0;s<this.DataDetail.length;s++)n.push({CreditSequenceNo:this.CreditSequenceNoOutput,DebitDetailSequenceNo:this.DataDetail[s].DebitDetailSequenceNo,CurrencyOperator:this.M_AR_CNAllocationD.operator,DebitCurrencyCd:this.M_AR_CNAllocationD.debitcurrencycd,CreditCurrencyCd:this.DataRowPage1.CurrencyCd,DebitCurrencyRate:this.DataDetail[s].CurrencyRate,CreditCurrencyRate:this.DataDetail[s].AllocationCurrencyRate,AllocationAmt:this.DataDetail[s].AllocationAmt,UserInput:this.getDataUser().UserId});e={OptionSeq:this.getOptionSeq().OptionSeq,LineNo:l,Data:n}}else{i=this.getUrlInsertMulti(),"I",l=3;n=[];for(var d=0;d<this.DataDetail.length;d++)n.push({CreditSequenceNo:this.CreditSequenceNoOutput,DebitDetailSequenceNo:this.DataDetail[d].DebitDetailSequenceNo,DebitCurrencyCd:this.M_AR_CNAllocationD.debitcurrencycd,CreditCurrencyCd:this.DataRowPage1.CurrencyCd,BaseCurrencyCd:this.BaseCurrencyCd,VATPaidBy:this.M_AR_CNAllocationD.vatpaidby,WithholdingPaidBy:this.M_AR_CNAllocationD.withholdingpaidby,CreditCurrencyRate:this.DataDetail[d].AllocationCurrencyRate,TotalAllocationAmt:this.M_AR_CNAllocationD.totalallocatedamt,CurrencyOperator:this.M_AR_CNAllocationD.operator,TaxCd:this.M_AR_CNAllocationD.taxcd,TaxType:this.DataDetail[d].TaxType,TaxClass:this.DataDetail[d].TaxTypeDescs,UserInput:this.getDataUser().UserId});e={OptionSeq:this.getOptionSeq().OptionSeq,LineNo:l,Data:n}}else if("D"==this.M_AR_CNAllocationD.journalcategory){for(var u=[],h=(n=[],0);h<this.DataDetail.length;h++){var p;if(0!=this.DataDetail[h].CreditDetailSequenceNo)r=this.getUrlUpdateMulti(),"U",c=3,u.push((p={CreditDetailSequenceNo:this.DataDetail[h].CreditDetailSequenceNo,UserEdit:this.getDataUser().UserId,DebitDetailSequenceNo:this.DataDetail[h].DebitDetailSequenceNo,CurrencyOperator:this.M_AR_CNAllocationD.operator,DebitCurrencyCd:this.M_AR_CNAllocationD.debitcurrencycd,CreditCurrencyCd:this.DataRowPage1.CurrencyCd},Object(o["a"])(p,"DebitCurrencyCd",this.M_AR_CNAllocationD.debitcurrencycd),Object(o["a"])(p,"CreditCurrencyCd",this.DataRowPage1.CurrencyCd),Object(o["a"])(p,"DebitCurrencyRate",this.DataDetail[h].CurrencyRate),Object(o["a"])(p,"CreditCurrencyRate",this.DataDetail[h].AllocationCurrencyRate),Object(o["a"])(p,"AllocationAmt",this.DataDetail[h].AllocationAmt),p));else if(0!=this.DataDetail[h].AllocationAmt){var b;i=this.getUrlInsertMulti(),"I",n.push((b={CreditSequenceNo:this.DataRow.CreditSequenceNo,UserInput:this.getDataUser().UserId,DebitDetailSequenceNo:this.DataDetail[h].DebitDetailSequenceNo,CurrencyOperator:this.M_AR_CNAllocationD.operator,DebitCurrencyCd:this.M_AR_CNAllocationD.debitcurrencycd,CreditCurrencyCd:this.DataRowPage1.CurrencyCd},Object(o["a"])(b,"DebitCurrencyCd",this.M_AR_CNAllocationD.debitcurrencycd),Object(o["a"])(b,"CreditCurrencyCd",this.DataRowPage1.CurrencyCd),Object(o["a"])(b,"DebitCurrencyRate",this.DataDetail[h].CurrencyRate),Object(o["a"])(b,"CreditCurrencyRate",this.DataDetail[h].AllocationCurrencyRate),Object(o["a"])(b,"AllocationAmt",this.DataDetail[h].AllocationAmt),b))}}a={OptionSeq:this.getOptionSeq().OptionSeq,LineNo:c,Data:u},e={OptionSeq:this.getOptionSeq().OptionSeq,LineNo:l,Data:n}}else{i=this.getUrlUpdateMulti(),"U",l=3;n=[];for(var C=0;C<this.DataDetail.length;C++)n.push({CreditDetailSequenceNo:this.DataDetail[C].CreditDetailSequenceNo,CreditSequenceNo:this.DataRow.CreditSequenceNo,DebitDetailSequenceNo:this.DataDetail[C].DebitDetailSequenceNo,TotalAllocationAmt:this.M_AR_CNAllocationD.totalallocatedamt,DebitCurrencyCd:this.M_AR_CNAllocationD.debitcurrencycd,CreditCurrencyCd:this.DataRowPage1.CurrencyCd,BaseCurrencyCd:this.BaseCurrencyCd,VATPaidBy:this.M_AR_CNAllocationD.vatpaidby,WithholdingPaidBy:this.M_AR_CNAllocationD.withholdingpaidby,CreditCurrencyRate:this.DataDetail[C].AllocationCurrencyRate,CurrencyOperator:this.M_AR_CNAllocationD.operator,TaxCd:this.M_AR_CNAllocationD.taxcd,TaxType:this.DataDetail[C].TaxType,TaxClass:this.DataDetail[C].TaxTypeDescs,UserEdit:this.getDataUser().UserId});e={OptionSeq:this.getOptionSeq().OptionSeq,LineNo:l,Data:n}}0!=this.DataRow.CreditSequenceNo&&"D"==this.M_AR_CNAllocationD.journalcategory?""!=r?this.postJSONMulti(r,a).then(function(a){null!=a&&(""!=i?t.postJSONMulti(i,e).then(function(e){null!=e&&t.M_Update3()}):t.M_Update3())}):""!=i&&this.postJSONMulti(i,e).then(function(e){null!=e&&t.M_Update3()}):this.postJSONMulti(i,e).then(function(e){null!=e&&t.M_Update3()})},M_Update3:function(){var t=this,e={OptionSeq:this.getOptionSeq().OptionSeq,LineNo:this.$parent.data.PageOrder,SubPortfolioCd:this.getDataUser().SubPortfolioCd,CreditSequenceNo:this.DataRow.CreditSequenceNo,CreditNo:this.DataRowPage1.CreditNo,CurrencyOperator:this.M_AR_CNAllocationD.operator,Remarks:this.M_AR_CNAllocationD.remarks,UserEdit:this.getDataUser().UserId};this.postJSON(this.getUrlUpdate()+"2",e).then(function(e){null!=e&&t.$parent.resultUpdate(e.Message)})},M_ClearForm:function(){var t;this.M_AR_CNAllocationD=(t={autounderover:"",journalcategory:"",debitno:"",trxtype:"",descs:"",headerdescs:"",currencycd:"",currencyrate:"",vatpaidby:"",withholdingpaidby:"",taxcurrencyrate:"",remarks:"",totalallocatedamt:"0",currentcurrencyrate:"",currenttaxcurrencyrate:"",operator:"",taxcd:"",rowid:0,lastupdatestamp:0,toutstandingamt:"",detailoutstandingamt:"",detailcurrencyrate:"",detailallocamt:"",debitcurrencycd:"",outstandingamt:"",fullallocate:""},Object(o["a"])(t,"detailoutstandingamt",""),Object(o["a"])(t,"debitcurrencyrate",""),Object(o["a"])(t,"allocationamt","0"),Object(o["a"])(t,"creditcurrencyrate","0"),t)},M_New:function(){var t=this.$store.getters.GetPage1Data;this.M_AR_CNAllocationD.currencycd=t.CurrencyCd},M_Edit:function(){},M_Delete:function(t){},getSpec:function(){var t=this,e={OptionFunctionCd:"GetGLSpecification",ModuleCd:"GL"};this.FnDynamicFunction(e).then(function(e){if(null!=e&&null!=e&&e.length>0){var a=e[0];t.BaseCurrencyCd=a.BaseCurrencyCd}})},getDataBy:function(t){var e=this,a={OptionFunctionCd:"SelectDebitChargesCreditAllocation2",ModuleCd:this.Module,DebitSequenceNo:t.DebitSequenceNo,CreditNo:this.DataRowPage1.CreditNo,SubPortfolioCd:this.getDataUser().SubPortfolioCd};this.FnDynamicFunction(a).then(function(a){if(null!=a){e.DebitCharge=[],e.DataDetail=a;for(var i=0,r=0;r<a.length;r++)i+=parseFloat(a[r].ChargeAmt),e.DebitCharge.push({data:{outstanding:a[r].ChargeAmt&&""!=a[r].ChargeAmt&&parseFloat(a[r].ChargeAmt)>0?e.isCurrency(a[r].ChargeAmt,e.decimal):"",currencyrate:a[r].CurrencyRate&&""!=a[r].CurrencyRate&&parseFloat(a[r].CurrencyRate)>0?e.isCurrency(a[r].CurrencyRate,e.decimal):"",allocamt:a[r].AllocationAmt&&""!=a[r].AllocationAmt&&parseFloat(a[r].AllocationAmt)>0?e.isCurrency(a[r].AllocationAmt,e.decimal):"",alloccurrencyrate:a[r].AllocationCurrencyRate&&""!=a[r].AllocationCurrencyRate&&parseFloat(a[r].AllocationCurrencyRate)>0?e.isCurrency(a[r].AllocationCurrencyRate,e.decimal):""},props:{label:{cLabel:a[r].TaxTypeDescs,cLabelSize:4,cValue:"",cPageLevel:e.PageLevel,cTabIndex:e.TabIndex,cVisible:!0,cClass:"lbl-col-align"},outstanding:{cValidate:"",cName:"outstanding_"+(r+1),cLabel:"",cLabelSize:4,cOrder:0,cKey:!1,cType:"decimal",cVisible:!0,cProtect:!0,cPageLevel:e.PageLevel,cTabIndex:e.TabIndex,cParentForm:"FormScope_"+e.PageLevel+"_"+e.TabIndex,cRowDisable:[]},currencyrate:{cValidate:"",cName:"currencyrate_"+(r+1),cLabel:"",cLabelSize:4,cOrder:0,cKey:!1,cType:"decimal",cVisible:!0,cProtect:!0,cPageLevel:e.PageLevel,cTabIndex:e.TabIndex,cParentForm:"FormScope_"+e.PageLevel+"_"+e.TabIndex,cRowDisable:[]},allocamt:{cValidate:"",cName:"allocamt_"+(r+1),cLabel:"",cLabelSize:4,cOrder:0,cKey:!1,cType:"decimal",cDecimal:2,cVisible:!0,cProtect:!1,cPageLevel:e.PageLevel,cTabIndex:e.TabIndex,cParentForm:"FormScope_"+e.PageLevel+"_"+e.TabIndex,cRowDisable:[]},alloccurrencyrate:{cValidate:"",cName:"alloccurrencyrate_"+(r+1),cLabel:"",cLabelSize:4,cOrder:0,cKey:!1,cType:"decimal",cVisible:!0,cProtect:!0,cPageLevel:e.PageLevel,cTabIndex:e.TabIndex,cParentForm:"FormScope_"+e.PageLevel+"_"+e.TabIndex,cRowDisable:[]}}});e.TotalCharge=i;var o={OptionSeq:e.getOptionSeq().OptionSeq,LineNo:e.$parent.data.PageOrder,currencycd:t.CurrencyCd,debitsequenceno:t.DebitSequenceNo,creditsequenceno:t.CreditSequenceNo,creditno:e.DataRowPage1.ReceiptNo,debtorcd:e.DataRowPage1.DebtorCd,SubportfolioCd:e.getDataUser().SubPortfolioCd};e.postEncode(e.getUrlById(),o).then(function(a){if(null!=a){var i=a.Data[0];e.M_AR_CNAllocationD={autounderover:"",journalcategory:i.journalcategory,debitno:i.debitno,trxtype:i.trxtype,descs:i.descs,headerdescs:i.headerdescs,debitcurrencycd:i.currencycd,currencyrate:i.currencyrate,vatpaidby:i.vatpaidby,withholdingpaidby:i.withholdingpaidby,taxcurrencyrate:i.taxcurrencyrate,remarks:i.remarks,totalallocatedamt:i.totalallocatedamt&&""!=i.totalallocatedamt&&parseFloat(i.totalallocatedamt)>0?e.isCurrency(i.totalallocatedamt,e.decimal):"",currentcurrencyrate:i.currentcurrencyrate,currenttaxcurrencyrate:i.currenttaxcurrencyrate,operator:i.operator,taxcd:i.taxcd,rowid:i.rowid,lastupdatestamp:t.LastUpdateStamp,toutstandingamt:i.toutstandingamt,detailoutstandingamt:i.detailoutstandingamt,detailcurrencyrate:i.detailcurrencyrate,detailallocamt:i.detailallocamt,outstandingamt:e.isCurrency(t.OutstandingAmt,e.decimal),fullallocate:i.totalallocatedamt>0?"Y":"",debitcurrencyrate:i.debitcurrencyrate,allocationamt:i.allocationamt,creditcurrencyrate:i.creditcurrencyrate},e.IEBy.Input=i.userinput,e.IEBy.Edit=i.useredit}})}})},FullAllocate:function(){"Y"==this.M_AR_CNAllocationD.fullallocate?(this.FnAllocationAmt=this.M_AR_CNAllocationD.outstandingamt,AutoSplitAllocationAmount()):(this.FnAllocationAmt=0,AutoSplitAllocationAmount())},AutoSplitAllocationAmount:function(){for(var t=this.FnAllocationAmt,e=2,a=0,i=0,r=0,o=0,l=[],c=[],n=0;n<this.DataDetail.length;n++)this.DataDetail[n].ChargeAmt&&""!=this.DataDetail[n].ChargeAmt&&(l.push(this.DataDetail[n].ChargeAmt),a+=parseFloat(this.DataDetail[n].ChargeAmt)),this.DataDetail[n].AllocationAmt&&""!=this.DataDetail[n].AllocationAmt&&c.push(this.DataDetail[n].AllocationAmt);if(0==c.length)return!1;if(0==t)for(var s=0;s<c.length;s++)c[s].value=0;else{i=t,i=this.replaceAllString(i,",","","number");for(var d=0;d<c.length;d++)parseFloat(i)<=0?c[d].value=0:parseFloat(a)>parseFloat(i)?c[d].value=l[d]/a*i:c[d].value=l[d];r=0;for(var u=0;u<c.length;u++)h=c[u].value,h=this.replaceAllString(h,",","","number"),r+=parseFloat(h)}if(o=i-r,0!=o){var h;o*=Math.pow(10,e),o=Math.round(o),o*=Math.pow(10,-1*e);for(var p=0;p<c.length;p++)if(h=c[p].value,h=this.replaceAllString(h,",","","number"),parseFloat(h)+parseFloat(o)<=parseFloat(l[p])){c[p].value=parseFloat(h)+parseFloat(o);break}}},OntotalallocateamtChange:function(t){if("VIEW"!=this.inputStatus)if(t=this.replaceAllString(t,",","","number"),t<=0||""==t)for(var e=0;e<this.DebitCharge.length;e++)this.DebitCharge[e].data.allocamt=this.isCurrency(0,this.decimal);else for(var a=0;a<this.DebitCharge.length;a++){var i=parseFloat(this.replaceAllString(this.DebitCharge[a].data.outstanding,",","","number"))/parseFloat(this.TotalCharge)*parseFloat(this.replaceAllString(t,",","","number"));this.DebitCharge[a].data.allocamt=parseFloat(i).toFixed(this.decimal)}this.$forceUpdate()},handleInput:function(t,e,a){"text"==this.DebitCharge[t].props[a].cType?e&&(this.DebitCharge[t].data[a]=e.toString()):this.DebitCharge[t].data[a]=e},formatNumber:function(t,e,a,i){t=t||window.event;var r=t.which?t.which:t.keyCode;if("decimal"==this.DebitCharge[e].props[i].cType||"numeric"==this.DebitCharge[e].props[i].cType)if(r>31&&(r<48||r>57)&&46!==r)t.preventDefault();else if(46==r)if("numeric"==this.DebitCharge[e].props[i].cType)t.preventDefault();else{var o=this.DebitCharge[e].data[i];if(-1===o.indexOf("."))return!0;t.preventDefault()}else{if(!(r>64&&r<91||r>96&&r<123||8==r||32==r))return!0;t.preventDefault()}else if(13==r)return!0},isCurrency2:function(t,e,a){if("decimal"==this.DebitCharge[t].props[a].cType&&""!==this.DebitCharge[t].data[a]){var i=this.replaceAllString(this.DebitCharge[t].data[a],",","","number"),r=null;if(i.toString().indexOf(".")>-1)if(r=i.toString().split("."),r[1].length<this.DebitCharge[t].props[a].cDecimal);else{var o=parseFloat(i).toFixed(this.DebitCharge[t].props[a].cDecimal),l=o.toString().split(".");r[0]=l[0],r[1]=l[1]}else r=[i,"00"];var c=r[0]&&""!=r[0]?r[0]:0,n="."+r[1];this.DebitCharge[t].data[a]=c.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+n}}},created:function(){},beforeMount:function(){},mounted:function(){this.hideSideBarMenu(),this.getSpec()},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},c=l,n=a("2877"),s=Object(n["a"])(c,i,r,!1,null,null,null);s.options.__file="AR_CNAllocationD.vue";e["default"]=s.exports}}]);
//# sourceMappingURL=chunk-2d20791a.0174bc1e.js.map