(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aad34"],{1351:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ABSListVuex",{attrs:{prop:t.propList,title:t.data.QueryName},on:{rowClicked:t.$parent.rowClicked,rowDblClicked:t.$parent.doDoubleClick,rowLinkClick:t.$parent.rowLink,pageSize:t.$parent.M_PageSize,pagination:t.$parent.M_Pagination,filter:t.$parent.M_Advance_Filter,headTable:t.$parent.M_Head_Table,refreshColumn:t.$parent.refreshColumn}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.$parent.showForm,expression:"$parent.showForm"}],staticClass:"el",style:"margin-top:10px;",attrs:{mousetip:"","mousetip-msg":"I'm a tooltip"}},[a("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse1",modifiers:{collapse1:!0}}],staticClass:"div-collapse"},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.IEBy.Input&&t.IEBy.Edit,expression:"IEBy.Input && IEBy.Edit"}],staticClass:"master-span"},[t._v("\n                    Input By : "+t._s(t.IEBy.Input)+" | Edit By : "+t._s(t.IEBy.Edit)+" "),a("font-awesome-icon",{staticClass:"icon-style-1__master",attrs:{icon:"sort-down"}})],1)]),a("b-collapse",{attrs:{id:"collapse1",visible:!0}},[a("b-row",{staticStyle:{"padding-left":"10px","padding-bottom":"10px"}},[a("b-col",{staticClass:"bColMasterForm",attrs:{md:"12",id:"col-left"}},[a("b-form",{attrs:{"data-vv-scope":"FormScope_"+t.PageLevel+"_"+t.TabIndex,"data-vv-value-path":"FormScope_"+t.PageLevel+"_"+t.TabIndex}},[a("b-row",{staticStyle:{"padding-left":"10px"}},[a("b-col",{attrs:{md:"12",id:"col-left"}},[a("b-row",[a("b-col",{attrs:{md:"6"}},[a("ABSinputTextVuex",{ref:"ref_debitno",attrs:{prop:t.PI_debitno},model:{value:t.M_AR_AllocationD.debitno,callback:function(e){t.$set(t.M_AR_AllocationD,"debitno",e)},expression:"M_AR_AllocationD.debitno"}})],1)],1),a("b-row",[a("b-col",{attrs:{md:"6"}},[a("ABSinputTextVuex",{ref:"ref_trxtype",attrs:{prop:t.PI_trxtype},model:{value:t.M_AR_AllocationD.trxtype,callback:function(e){t.$set(t.M_AR_AllocationD,"trxtype",e)},expression:"M_AR_AllocationD.trxtype"}})],1)],1),a("b-row",[a("b-col",{attrs:{md:"6"}},[a("ABSinputTextVuex",{ref:"ref_headerdescs",attrs:{prop:t.PI_headerdescs},model:{value:t.M_AR_AllocationD.headerdescs,callback:function(e){t.$set(t.M_AR_AllocationD,"headerdescs",e)},expression:"M_AR_AllocationD.headerdescs"}})],1)],1),a("b-row",[a("b-col",{attrs:{md:"6"}},[a("ABSTextAreaVuex",{ref:"ref_descs",attrs:{prop:t.PI_descs},model:{value:t.M_AR_AllocationD.descs,callback:function(e){t.$set(t.M_AR_AllocationD,"descs",e)},expression:"M_AR_AllocationD.descs"}})],1)],1),a("b-row",[a("b-col",{attrs:{md:"6"}},[a("ABSinputRadioButtonVuex",{ref:"ref_vatpaidby",attrs:{prop:t.PI_vatpaidby},on:{input:t.OnvatpaidbyChange},model:{value:t.M_AR_AllocationD.vatpaidby,callback:function(e){t.$set(t.M_AR_AllocationD,"vatpaidby",e)},expression:"M_AR_AllocationD.vatpaidby"}})],1),a("b-col",{attrs:{md:"6"}},[a("ABSinputRadioButtonVuex",{ref:"ref_withholdingpaidby",attrs:{prop:t.PI_withholdingpaidby},on:{input:t.OnwithholdingpaidbyChange},model:{value:t.M_AR_AllocationD.withholdingpaidby,callback:function(e){t.$set(t.M_AR_AllocationD,"withholdingpaidby",e)},expression:"M_AR_AllocationD.withholdingpaidby"}})],1)],1),a("b-row",[a("b-col",{attrs:{md:"6"}},[a("ABSinputTextVuex",{ref:"ref_outstandingamt",attrs:{prop:t.PI_outstandingamt},model:{value:t.M_AR_AllocationD.outstandingamt,callback:function(e){t.$set(t.M_AR_AllocationD,"outstandingamt",e)},expression:"M_AR_AllocationD.outstandingamt"}})],1),a("b-col",{attrs:{md:"6"}},[a("ABSinputTextVuex",{ref:"ref_totalallocatedamt",attrs:{prop:t.PI_totalallocatedamt},on:{input:t.OntotalallocateamtChange},model:{value:t.M_AR_AllocationD.totalallocatedamt,callback:function(e){t.$set(t.M_AR_AllocationD,"totalallocatedamt",e)},expression:"M_AR_AllocationD.totalallocatedamt"}})],1)],1),a("b-row",[a("b-col",{attrs:{md:"6"}},[a("ABSinputTextVuex",{ref:"ref_debitcurrencycd",attrs:{prop:t.PI_debitcurrencycd},model:{value:t.M_AR_AllocationD.debitcurrencycd,callback:function(e){t.$set(t.M_AR_AllocationD,"debitcurrencycd",e)},expression:"M_AR_AllocationD.debitcurrencycd"}})],1),a("b-col",{attrs:{md:"6"}},[a("ABSinputCheckBox",{ref:"ref_fullallocate",attrs:{prop:t.PI_fullallocate},on:{input:t.OnfullallocateChange},model:{value:t.M_AR_AllocationD.fullallocate,callback:function(e){t.$set(t.M_AR_AllocationD,"fullallocate",e)},expression:"M_AR_AllocationD.fullallocate"}})],1)],1),a("b-row",[a("b-col",{attrs:{md:"6"}},[a("ABSinputRadioButtonVuex",{ref:"ref_operator",attrs:{prop:t.PI_operator},on:{input:t.OnoperatorChange},model:{value:t.M_AR_AllocationD.operator,callback:function(e){t.$set(t.M_AR_AllocationD,"operator",e)},expression:"M_AR_AllocationD.operator"}})],1)],1),a("div",{staticClass:"div-collapse"},[a("b-row",[a("b-col",{attrs:{md:"2"}}),a("b-col",{attrs:{md:"2"}},[a("ABSLabelOnly",{attrs:{prop:{cLabel:"Outstanding Amount",cLabelSize:4,cValue:"",cPageLevel:t.PageLevel,cTabIndex:t.TabIndex,cVisible:!0,cClass:"lbl-col-align"}}})],1),a("b-col",{attrs:{md:"2"}},[a("ABSLabelOnly",{attrs:{prop:{cLabel:"Currency Rate",cLabelSize:4,cValue:"",cPageLevel:t.PageLevel,cTabIndex:t.TabIndex,cVisible:!0,cClass:"lbl-col-align"}}})],1),a("b-col",{attrs:{md:"2"}},[a("ABSLabelOnly",{attrs:{prop:{cLabel:"Allocation Amount",cLabelSize:4,cValue:"",cPageLevel:t.PageLevel,cTabIndex:t.TabIndex,cVisible:!0,cClass:"lbl-col-align"}}})],1),a("b-col",{attrs:{md:"2"}},[a("ABSLabelOnly",{attrs:{prop:{cLabel:"Allocation Currency Rate",cLabelSize:4,cValue:"",cPageLevel:t.PageLevel,cTabIndex:t.TabIndex,cVisible:!0,cClass:"lbl-col-align"}}})],1)],1)],1),t._l(t.DebitCharge,function(e,i){return a("b-row",{key:i},[a("b-col",{attrs:{md:"2"}},[a("ABSLabelOnly",{attrs:{prop:e.props.label}})],1),a("b-col",{directives:[{name:"show",rawName:"v-show",value:"VIEW"!==t.inputStatus,expression:"inputStatus!=='VIEW'"}],attrs:{md:"2"}},[a("b-form-input",{ref:"ref_outstanding_"+(i+1),refInFor:!0,staticClass:"text-field-form form-control input",staticStyle:{"text-align":"right"},attrs:{name:e.props.outstanding.cName,id:e.props.outstanding.cName,rowLine:"0",type:"text",disabled:"disabled"},on:{input:function(a){t.handleInput(i,e.data.outstanding,"outstanding")},blur:function(a){t.onBlur("outstanding",e.data.outstanding)}},nativeOn:{keypress:function(a){t.formatNumber(a,i,e.data.outstanding,"outstanding")},blur:function(a){t.isCurrency2(i,e.data.outstanding,"outstanding")}},model:{value:e.data.outstanding,callback:function(a){t.$set(e.data,"outstanding",a)},expression:"data.data.outstanding"}})],1),"VIEW"==t.inputStatus&&"decimal"==e.props.outstanding.cType?a("b-col",{staticStyle:{"text-align":"right !important"},attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.outstanding))])]):"VIEW"==t.inputStatus&&"numeric"==e.props.outstanding.cType?a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.outstanding))])]):"VIEW"==t.inputStatus?a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.outstanding))])]):t._e(),a("b-col",{directives:[{name:"show",rawName:"v-show",value:"VIEW"!==t.inputStatus,expression:"inputStatus!=='VIEW'"}],attrs:{md:"2"}},[a("b-form-input",{ref:"ref_currencyrate_"+(i+1),refInFor:!0,staticClass:"text-field-form form-control input",staticStyle:{"text-align":"right"},attrs:{name:e.props.currencyrate.cName,id:e.props.currencyrate.cName,rowLine:"0",type:"text",disabled:"disabled"},on:{input:function(a){t.handleInput(i,e.data.currencyrate,"currencyrate")},blur:function(a){t.onBlur("currencyrate",i,e.data.currencyrate)}},nativeOn:{keypress:function(a){t.formatNumber(a,i,e.data.currencyrate,"currencyrate")},blur:function(a){t.isCurrency2(i,e.data.currencyrate,"currencyrate")}},model:{value:e.data.currencyrate,callback:function(a){t.$set(e.data,"currencyrate",a)},expression:"data.data.currencyrate"}})],1),"VIEW"==t.inputStatus&&"decimal"==e.props.currencyrate.cType?a("b-col",{staticStyle:{"text-align":"right !important"},attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.currencyrate))])]):"VIEW"==t.inputStatus&&"numeric"==e.props.currencyrate.cType?a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.currencyrate))])]):"VIEW"==t.inputStatus?a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.currencyrate))])]):t._e(),a("b-col",{directives:[{name:"show",rawName:"v-show",value:"VIEW"!==t.inputStatus,expression:"inputStatus!=='VIEW'"}],attrs:{md:"2"}},[a("b-form-input",{ref:"ref_allocamt_"+(i+1),refInFor:!0,staticClass:"text-field-form form-control input",staticStyle:{"text-align":"right"},attrs:{name:e.props.allocamt.cName,id:e.props.allocamt.cName,rowLine:"0",type:"text"},on:{input:function(a){t.handleInput(i,e.data.allocamt,"allocamt")},blur:function(a){t.onBlur("allocamt",i,e.data.allocamt)}},nativeOn:{keypress:function(a){t.formatNumber(a,i,e.data.allocamt,"allocamt")},blur:function(a){t.isCurrency2(i,e.data.allocamt,"allocamt")}},model:{value:e.data.allocamt,callback:function(a){t.$set(e.data,"allocamt",a)},expression:"data.data.allocamt"}})],1),"VIEW"==t.inputStatus&&"decimal"==e.props.allocamt.cType?a("b-col",{staticStyle:{"text-align":"right !important"},attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.allocamt))])]):"VIEW"==t.inputStatus&&"numeric"==e.props.allocamt.cType?a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.allocamt))])]):"VIEW"==t.inputStatus?a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.allocamt))])]):t._e(),a("b-col",{directives:[{name:"show",rawName:"v-show",value:"VIEW"!==t.inputStatus,expression:"inputStatus!=='VIEW'"}],attrs:{md:"2"}},[a("b-form-input",{ref:"ref_alloccurrencyrate_"+(i+1),refInFor:!0,staticClass:"text-field-form form-control input",staticStyle:{"text-align":"right"},attrs:{name:e.props.alloccurrencyrate.cName,id:e.props.alloccurrencyrate.cName,rowLine:"0",type:"text",disabled:"disabled"},on:{input:function(a){t.handleInput(i,e.data.alloccurrencyrate,"alloccurrencyrate")},blur:function(a){t.onBlur("alloccurrencyrate",i,e.data.alloccurrencyrate)}},nativeOn:{keypress:function(a){t.formatNumber(a,i,e.data.alloccurrencyrate,"alloccurrencyrate")},blur:function(a){t.isCurrency2(i,e.data.alloccurrencyrate,"alloccurrencyrate")}},model:{value:e.data.alloccurrencyrate,callback:function(a){t.$set(e.data,"alloccurrencyrate",a)},expression:"data.data.alloccurrencyrate"}})],1),"VIEW"==t.inputStatus&&"decimal"==e.props.alloccurrencyrate.cType?a("b-col",{staticStyle:{"text-align":"right !important"},attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.alloccurrencyrate))])]):"VIEW"==t.inputStatus&&"numeric"==e.props.alloccurrencyrate.cType?a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.alloccurrencyrate))])]):"VIEW"==t.inputStatus?a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"lbl-value-view-form notranslate"},[t._v(t._s(e.data.alloccurrencyrate))])]):t._e()],1)}),a("b-row",[a("b-col",{attrs:{md:"6"}},[a("ABSTextAreaVuex",{ref:"ref_remarks",attrs:{prop:t.PI_remarks},on:{input:t.OnremarksChange},model:{value:t.M_AR_AllocationD.remarks,callback:function(e){t.$set(t.M_AR_AllocationD,"remarks",e)},expression:"M_AR_AllocationD.remarks"}})],1)],1)],2)],1),a("ABSTAnalysis",{attrs:{prop:t.PTAnalysis}})],1)],1)],1)],1)],1)],1)},r=[],l=(a("a481"),a("28a5"),a("6b54"),a("ade3")),o={props:{PageLevel:"",TabIndex:"",data:""},data:function(){var t;return{ValKey:null,FormType:"List",Module:"AR",propList:{initialWhere:"",LineNo:this.$parent.data.PageOrder,PageLevel:this.PageLevel,TabIndex:this.TabIndex,OrderBy:"",SourceField:"",ParamView:""},IEBy:{Input:"",Edit:""},M_AR_AllocationD:(t={autounderover:"",journalcategory:"",debitno:"",trxtype:"",descs:"",headerdescs:"",debitcurrencycd:"",currencyrate:"",vatpaidby:"",withholdingpaidby:"",taxcurrencyrate:"",remarks:"",totalallocatedamt:"0",currentcurrencyrate:"",currenttaxcurrencyrate:"",operator:"",taxcd:"",rowid:0,lastupdatestamp:0,toutstandingamt:"",detailoutstandingamt:"",detailcurrencyrate:"",detailallocamt:"",outstandingamt:"",fullallocate:""},Object(l["a"])(t,"detailoutstandingamt",""),Object(l["a"])(t,"debitcurrencyrate",""),Object(l["a"])(t,"allocationamt","0"),Object(l["a"])(t,"creditcurrencyrate","0"),t),PI_kautounderover:{cValidate:"",cName:"kautounderover",cLabel:"",cLabelSize:4,cOptions:[{text:"Otomatis Isikan Sisa Total Alokasi dengan Total Pembayaran ke Over/Under Payment ? ",value:"Y"}],cOrder:101,cKey:!1,cVisible:!0,cProtect:!1,cDefault:"",cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_debitno:{cValidate:"",cLabel:"Doc. No",cLabelSize:4,cValue:"",cOrder:102,cKey:!1,cVisible:!0,cProtect:!0,cDefault:"",cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_trxtype:{cValidate:"",cLabel:"Trans. Type",cLabelSize:4,cValue:"",cOrder:103,cKey:!1,cVisible:!0,cProtect:!0,cDefault:"",cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_headerdescs:{cValidate:"",cLabel:"Description",cLabelSize:4,cValue:"",cOrder:104,cKey:!1,cVisible:!0,cProtect:!0,cDefault:"",cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_descs:{cValidate:"",cLabel:"Detail Description",cLabelSize:4,cValue:"",cOrder:105,cKey:!1,cVisible:!0,cProtect:!0,cDefault:"",cResize:!1,cReadOnly:!1,cRows:2,cMaxRows:2,cSize:"md",cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_vatpaidby:{cValidate:"",cName:"vatpaidby",cId:"rdbvatpaidby",cRadioOptions:[{text:"Debtor",value:"D"},{text:"Management",value:"M"}],cRadioDefaultOption:"",cLabel:"VAT Paid By",cLabelSize:4,cOrder:106,cProtect:!0,cVisible:!0,cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_withholdingpaidby:{cValidate:"",cName:"withholdingpaidby",cId:"rdbwithholdingpaidby",cRadioOptions:[{text:"Debtor",value:"D"},{text:"Management",value:"M"}],cRadioDefaultOption:"",cLabel:"Withholding Paid By   ",cLabelSize:4,cOrder:107,cProtect:!0,cVisible:!0,cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_outstandingamt:{cLabel:"Outstanding Amount",cLabelSize:4,cValue:"",cType:"decimal",cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cVisible:!0,cProtect:!0},PI_totalallocatedamt:{cValidate:"required",cName:"totalallocatedamt",cLabel:"Allocation Amount",cLabelSize:4,cOrder:108,cKey:!1,cType:"decimal",cVisible:!0,cProtect:!1,cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_fullallocate:{cValidate:"",cName:"fullallocate",cLabel:"Allocation",cLabelSize:4,cOptions:[{text:"Auto Allocate",value:"Y"}],cOrder:108,cKey:!1,cVisible:!0,cProtect:!1,cDefault:"",cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_debitcurrencycd:{cValidate:"",cLabel:"Currency",cLabelSize:4,cValue:"",cOrder:110,cKey:!1,cVisible:!0,cProtect:!0,cDefault:"",cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_operator:{cValidate:"",cName:"operator",cId:"rdboperator",cRadioOptions:[{text:"Multiply (*)",value:"*"},{text:"Divide (/)",value:"/"}],cRadioDefaultOption:"",cLabel:"Operator",cLabelSize:4,cOrder:111,cProtect:!0,cVisible:!0,cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_detailoutstandingamt:{cLabel:"",cLabelSize:4,cValue:"",cType:"decimal",cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cVisible:!0,cProtect:!0},PI_detailcurrencyrate:{cLabel:"",cLabelSize:4,cValue:"",cType:"decimal",cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cVisible:!0,cProtect:!0},PI_detailallocamt:{cValidate:"",cName:"allocationamt",cLabel:"",cLabelSize:4,cOrder:112,cKey:!1,cType:"decimal",cVisible:!0,cProtect:!1,cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_detailalloccurrencyamt:{cValidate:"",cName:"creditcurrencyrate",cLabel:"",cLabelSize:4,cOrder:113,cKey:!1,cType:"decimal",cVisible:!0,cProtect:!0,cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PI_remarks:{cValidate:"",cName:"remarks",cLabel:"Remarks",cLabelSize:4,cOrder:114,cKey:!1,cDefault:"",cProtect:!1,cVisible:!0,cResize:!1,cReadOnly:!1,cRows:3,cMaxRows:3,cSize:"md",cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cParentForm:"FormScope_"+this.PageLevel+"_"+this.TabIndex},PTAnalysis:{cPageLevel:this.PageLevel,cTabIndex:this.TabIndex,cPageMasterSeq:this.data.PageMasterSeq,cFormPageNo:this.data.PageOrder},DataDetail:null,DebitCharge:[],TotalCharge:0,FnAllocationAmt:0,BaseCurrencyCd:""}},computed:{inputStatus:function(){return this.$store.getters.getLevel==this.PageLevel&&this.$store.getters.getTab==this.TabIndex?this.$store.getters.getStatus.toUpperCase():"VIEW"},DataRow:function(){return this.$store.getters.GetPage2Data},DataRowPage1:function(){return this.$store.getters.GetPage1Data}},methods:{OnkautounderoverChange:function(t){var e=this;this.$nextTick(function(){e.inputStatus}),this.$forceUpdate()},OnvatpaidbyChange:function(t){var e=this;this.$nextTick(function(){e.inputStatus}),this.$forceUpdate()},OnwithholdingpaidbyChange:function(t){var e=this;this.$nextTick(function(){e.inputStatus}),this.$forceUpdate()},OnfullallocateChange:function(t){var e=this;this.$nextTick(function(){if("VIEW"!=e.inputStatus)if("Y"==t){e.M_AR_AllocationD.totalallocatedamt=e.isCurrency(e.TotalCharge,e.decimal);for(var a=0;a<e.DebitCharge.length;a++)e.DebitCharge[a].data.allocamt=e.DebitCharge[a].data.outstanding}else{e.M_AR_AllocationD.totalallocatedamt="";for(var i=0;i<e.DebitCharge.length;i++)e.DebitCharge[i].data.allocamt=""}}),this.$forceUpdate()},OnoperatorChange:function(t){var e=this;this.$nextTick(function(){e.inputStatus}),this.$forceUpdate()},OnremarksChange:function(t){var e=this;this.$nextTick(function(){e.inputStatus}),this.$forceUpdate()},setToolbarButton:function(){this.getToolbar().statusFunction[0].disabled=!0},M_Head_Table:function(){},M_PageSize:function(){},M_TabClick:function(){},M_Pagination:function(){},M_Advance_Filter:function(){},M_Search:function(t){},M_Refresh:function(){},M_Cancel:function(){},doDoubleClick:function(){},rowClicked:function(t,e){},rowLink:function(t){this.$refs.modalTest.show()},paramFromParent:function(){this.$parent.showForm=!1;var t=this.$store.getters.GetPage1Data;this.M_AR_AllocationD.debitcurrencycd=t.CurrencyCd,this.getSpec()},M_Insert:function(){},M_Update:function(){var t=this;if(0==this.DataRow.CreditSequenceNo){var e={OptionFunctionCd:"CheckCreditNoteChargeToInvoiceD",ModuleCd:this.Module,SequenceNo:this.DataRow.DebitSequenceNo};this.FnDynamicFunction(e).then(function(e){!e||e.length>0?t.alertError("Cannot Edit Data, Invoice has already change to CN"):t.M_UpdateOR()})}else this.M_UpdateOR()},InsertOR:function(){if("I"!=this.M_AR_AllocationD.journalcategory||0!=this.DataDetail[x].AllocationAmt){({_Method_:"UPDATE",_LineNo_:this.$parent.data.PageOrder,SubportfolioCd:this.getDataUser().SubPortfolioCd,DebitNo:this.M_AR_AllocationD.debitno,DebitSequenceNo:this.DataRow.DebitSequenceNo,CreditNo:this.DataRowPage1.CreditNo,CreditSequenceNo:this.DataRow.CreditSequenceNo,VatPaidByManagement:"M"==this.M_AR_AllocationD.vatpaidby?"Y":"N",VatPaidByDebtor:"D"==this.M_AR_AllocationD.vatpaidby?"Y":"N",WithHoldingPaidByManagement:"M"==this.M_AR_AllocationD.withholdingpaidby?"Y":"N",WithHoldingPaidByDebtor:"D"==this.M_AR_AllocationD.withholdingpaidby?"Y":"N",JournalCategory:this.M_AR_AllocationD.journalcategory,AllocationAmt:this.replaceAllString(this.M_AR_AllocationD.totalallocatedamt,",","","number"),CurrencyOperator:this.M_AR_AllocationD.operator,Remarks:this.M_AR_AllocationD.remarks?this.M_AR_AllocationD.remarks:"",UserInput:this.getDataUser().UserId})}},UpdateOR:function(){},M_Updatex:function(){var t=this,e={OptionSeq:this.getOptionSeq().OptionSeq,LineNo:this.$parent.data.PageOrder,SubportfolioCd:this.getDataUser().SubPortfolioCd,DebitNo:this.M_AR_AllocationD.debitno,DebitSequenceNo:this.DataRow.DebitSequenceNo,CreditNo:this.DataRowPage1.CreditNo,CreditSequenceNo:this.DataRow.CreditSequenceNo,VatPaidByManagement:"M"==this.M_AR_AllocationD.vatpaidby?"Y":"N",VatPaidByDebtor:"D"==this.M_AR_AllocationD.vatpaidby?"Y":"N",WithHoldingPaidByManagement:"M"==this.M_AR_AllocationD.withholdingpaidby?"Y":"N",WithHoldingPaidByDebtor:"D"==this.M_AR_AllocationD.withholdingpaidby?"Y":"N",JournalCategory:this.M_AR_AllocationD.journalcategory,AllocationAmt:this.replaceAllString(this.M_AR_AllocationD.totalallocatedamt,",","","number"),CurrencyOperator:this.M_AR_AllocationD.operator,Remarks:this.M_AR_AllocationD.remarks?this.M_AR_AllocationD.remarks:"",UserInput:this.getDataUser().UserId,CreditSequenceNoO_Output:""};this.postJSON(this.getUrlUpdate(),e).then(function(e){null!=e&&(t.M_Update2(e.Data.CreditSequenceNoO),t.refreshListParent(!0))})},M_UpdateOR:function(){var t=this,e=[],a={};a={_Method_:"UPDATE",_LineNo_:this.$parent.data.PageOrder,SubportfolioCd:this.getDataUser().SubPortfolioCd,DebitSequenceNo:this.DataRow.DebitSequenceNo,CreditNo:this.DataRowPage1.CreditNo,CurrencyOperator:this.M_AR_AllocationD.operator,Remarks:this.M_AR_AllocationD.remarks?this.M_AR_AllocationD.remarks:"",UserInput:this.getDataUser().UserId,CreditSequenceNo_Output:""};var i="CreditSequenceNo";i=0==this.DataRow.CreditSequenceNo?"CreditSequenceNo":this.DataRow.CreditSequenceNo;var r=[];if(0==this.DataRow.CreditSequenceNo)if("D"==this.M_AR_AllocationD.journalcategory)for(var l=0;l<this.DataDetail.length;l++)r.push({_Method_:"SAVE",_LineNo_:1,CreditSequenceNo:i,DebitDetailSequenceNo:this.DataDetail[l].DebitDetailSequenceNo,CurrencyOperator:this.M_AR_AllocationD.operator,DebitCurrencyCd:this.M_AR_AllocationD.debitcurrencycd,CreditCurrencyCd:this.DataRowPage1.CurrencyCd,DebitCurrencyRate:this.replaceAllString(this.isCurrency(this.DataDetail[l].CurrencyRate,this.decimal),",","","number"),CreditCurrencyRate:this.replaceAllString(this.isCurrency(this.DataDetail[l].AllocationCurrencyRate,this.decimal),",","","number"),AllocationAmt:this.replaceAllString(this.DebitCharge[l].data.allocamt,",","","number"),UserInput:this.getDataUser().UserId});else for(var o=0;o<this.DataDetail.length;o++)r.push({_Method_:"SAVE",_LineNo_:2,CreditSequenceNo:i,DebitDetailSequenceNo:this.DataDetail[o].DebitDetailSequenceNo,TotalAllocationAmt:this.replaceAllString(this.M_AR_AllocationD.totalallocatedamt,",","","number"),DebitCurrencyCd:this.M_AR_AllocationD.debitcurrencycd,CreditCurrencyCd:this.DataRowPage1.CurrencyCd,BaseCurrencyCd:this.BaseCurrencyCd,AllocationAmt:this.replaceAllString(this.isCurrency(this.DataDetail[o].AllocationAmt,this.decimal),",","","number"),VATPaidBy:this.M_AR_AllocationD.vatpaidby,WithholdingPaidBy:this.M_AR_AllocationD.withholdingpaidby,CreditCurrencyRate:this.replaceAllString(this.isCurrency(this.DataDetail[o].AllocationCurrencyRate,this.decimal),",","","number"),CurrencyOperator:this.M_AR_AllocationD.operator,TaxCd:this.M_AR_AllocationD.taxcd,TaxType:this.DataDetail[o].TaxType,TaxClass:this.DataDetail[o].TaxTypeDescs,UserInput:this.getDataUser().UserId});else if("D"==this.M_AR_AllocationD.journalcategory)for(var c=0;c<this.DataDetail.length;c++)0!=this.DataDetail[c].CreditDetailSequenceNo?r.push({_Method_:"UPDATE",_LineNo_:2,CreditDetailSequenceNo:this.DataDetail[c].CreditDetailSequenceNo,UserEdit:this.getDataUser().UserId,DebitDetailSequenceNo:this.DataDetail[c].DebitDetailSequenceNo,CurrencyOperator:this.M_AR_AllocationD.operator,DebitCurrencyCd:this.M_AR_AllocationD.debitcurrencycd,CreditCurrencyCd:this.DataRowPage1.CurrencyCd,DebitCurrencyRate:this.replaceAllString(this.isCurrency(this.DataDetail[c].CurrencyRate,this.decimal),",","","number"),CreditCurrencyRate:this.replaceAllString(this.isCurrency(this.DataDetail[c].AllocationCurrencyRate,this.decimal),",","","number"),AllocationAmt:this.replaceAllString(this.DebitCharge[c].data.allocamt,",","","number")}):0!=this.replaceAllString(this.DebitCharge[c].data.allocamt,",","","number")&&r.push({_Method_:"SAVE",_LineNo_:1,CreditSequenceNo:i,UserInput:this.getDataUser().UserId,DebitDetailSequenceNo:this.DataDetail[c].DebitDetailSequenceNo,CurrencyOperator:this.M_AR_AllocationD.operator,DebitCurrencyCd:this.M_AR_AllocationD.debitcurrencycd,CreditCurrencyCd:this.DataRowPage1.CurrencyCd,DebitCurrencyRate:this.replaceAllString(this.isCurrency(this.DataDetail[c].CurrencyRate,this.decimal),",","","number"),CreditCurrencyRate:this.replaceAllString(this.isCurrency(this.DataDetail[c].AllocationCurrencyRate,this.decimal),",","","number"),AllocationAmt:this.replaceAllString(this.DebitCharge[c].data.allocamt,",","","number")});else for(var n=0;n<this.DataDetail.length;n++)r.push({_Method_:"UPDATE",_LineNo_:3,CreditDetailSequenceNo:this.DataDetail[n].CreditDetailSequenceNo,CreditSequenceNo:i,DebitDetailSequenceNo:this.DataDetail[n].DebitDetailSequenceNo,TotalAllocationAmt:this.replaceAllString(this.M_AR_AllocationD.totalallocatedamt,",","","number"),DebitCurrencyCd:this.M_AR_AllocationD.debitcurrencycd,CreditCurrencyCd:this.DataRowPage1.CurrencyCd,BaseCurrencyCd:this.BaseCurrencyCd,VATPaidBy:this.M_AR_AllocationD.vatpaidby,WithholdingPaidBy:this.M_AR_AllocationD.withholdingpaidby,CreditCurrencyRate:this.replaceAllString(this.isCurrency(this.DataDetail[n].AllocationCurrencyRate,this.decimal),",","","number"),CurrencyOperator:this.M_AR_AllocationD.operator,TaxCd:this.M_AR_AllocationD.taxcd,TaxType:this.DataDetail[n].TaxType,TaxClass:this.DataDetail[n].TaxTypeDescs,UserEdit:this.getDataUser().UserId});var s={};s={_Method_:"UPDATE2",_LineNo_:1,SubPortfolioCd:this.getDataUser().SubPortfolioCd,SubportfolioCd:this.getDataUser().SubPortfolioCd,CreditSequenceNo:i,CreditNo:this.DataRowPage1.CreditNo,CurrencyOperator:this.M_AR_AllocationD.operator,Remarks:this.M_AR_AllocationD.remarks?this.M_AR_AllocationD.remarks:"",UserEdit:this.getDataUser().UserId,EntryType:"R"},0==this.DataRow.CreditSequenceNo?e.push({A_Update:a,B_Looping:r,C_Update:s}):e.push({A_Looping:r,B_Update:s});var d={OptionSeq:this.getOptionSeq().OptionSeq,LineNo:this.$parent.data.PageOrder,Data:e};this.postJSONMulti(this.getUrlProsesDataPostMulti(),d).then(function(e){null!=e&&(t.$parent.resultUpdate("Data Has Been Saved Successfully"),t.refreshListParent(!0))})},M_Update2:function(t){var e=this,a={},i={},r="",o="",c=this.$parent.data.PageOrder,n=this.$parent.data.PageOrder;if(0==t)if("D"==this.M_AR_AllocationD.journalcategory){r=this.getUrlInsertMulti(),"I";for(var s=[],d=0;d<this.DataDetail.length;d++)s.push({CreditSequenceNo:t,DebitDetailSequenceNo:this.DataDetail[d].DebitDetailSequenceNo,CurrencyOperator:this.M_AR_AllocationD.operator,DebitCurrencyCd:this.M_AR_AllocationD.debitcurrencycd,CreditCurrencyCd:this.DataRowPage1.CurrencyCd,DebitCurrencyRate:parseFloat(this.DataDetail[d].CurrencyRate).toFixed(this.decimal),CreditCurrencyRate:parseFloat(this.DataDetail[d].AllocationCurrencyRate).toFixed(this.decimal),AllocationAmt:parseFloat(this.DataDetail[d].AllocationAmt).toFixed(this.decimal),UserInput:this.getDataUser().UserId});a={OptionSeq:this.getOptionSeq().OptionSeq,LineNo:c,Data:s}}else{r=this.getUrlInsertMulti(),"I",c=2;s=[];for(var u=0;u<this.DataDetail.length;u++)s.push({CreditSequenceNo:t,DebitDetailSequenceNo:this.DataDetail[u].DebitDetailSequenceNo,TotalAllocationAmt:this.replaceAllString(this.M_AR_AllocationD.totalallocatedamt,",","","number"),DebitCurrencyCd:this.M_AR_AllocationD.debitcurrencycd,CreditCurrencyCd:this.DataRowPage1.CurrencyCd,BaseCurrencyCd:this.BaseCurrencyCd,AllocationAmt:parseFloat(this.DataDetail[u].AllocationAmt).toFixed(this.decimal),VATPaidBy:this.M_AR_AllocationD.vatpaidby,WithholdingPaidBy:this.M_AR_AllocationD.withholdingpaidby,CreditCurrencyRate:parseFloat(this.DataDetail[u].AllocationCurrencyRate).toFixed(this.decimal),CurrencyOperator:this.M_AR_AllocationD.operator,TaxCd:this.M_AR_AllocationD.taxcd,TaxType:this.DataDetail[u].TaxType,TaxClass:this.DataDetail[u].TaxTypeDescs,UserInput:this.getDataUser().UserId});a={OptionSeq:this.getOptionSeq().OptionSeq,LineNo:c,Data:s}}else if("D"==this.M_AR_AllocationD.journalcategory){for(var h=[],p=(s=[],0);p<this.DataDetail.length;p++){var b;if(0!=this.DataDetail[p].CreditDetailSequenceNo)o=this.getUrlUpdateMulti(),"U",n=2,h.push((b={CreditDetailSequenceNo:this.DataDetail[p].CreditDetailSequenceNo,UserEdit:this.getDataUser().UserId,DebitDetailSequenceNo:this.DataDetail[p].DebitDetailSequenceNo,CurrencyOperator:this.M_AR_AllocationD.operator,DebitCurrencyCd:this.M_AR_AllocationD.debitcurrencycd,CreditCurrencyCd:this.DataRowPage1.CurrencyCd},Object(l["a"])(b,"DebitCurrencyCd",this.M_AR_AllocationD.debitcurrencycd),Object(l["a"])(b,"CreditCurrencyCd",this.DataRowPage1.CurrencyCd),Object(l["a"])(b,"DebitCurrencyRate",parseFloat(this.DataDetail[p].CurrencyRate).toFixed(this.decimal)),Object(l["a"])(b,"CreditCurrencyRate",parseFloat(this.DataDetail[p].AllocationCurrencyRate).toFixed(this.decimal)),Object(l["a"])(b,"AllocationAmt",parseFloat(this.DataDetail[p].AllocationAmt).toFixed(this.decimal)),b));else if(0!=this.DataDetail[p].AllocationAmt){var D;r=this.getUrlInsertMulti(),"I",s.push((D={CreditSequenceNo:t,UserInput:this.getDataUser().UserId,DebitDetailSequenceNo:this.DataDetail[p].DebitDetailSequenceNo,CurrencyOperator:this.M_AR_AllocationD.operator,DebitCurrencyCd:this.M_AR_AllocationD.debitcurrencycd,CreditCurrencyCd:this.DataRowPage1.CurrencyCd},Object(l["a"])(D,"DebitCurrencyCd",this.M_AR_AllocationD.debitcurrencycd),Object(l["a"])(D,"CreditCurrencyCd",this.DataRowPage1.CurrencyCd),Object(l["a"])(D,"DebitCurrencyRate",parseFloat(this.DataDetail[p].CurrencyRate).toFixed(this.decimal)),Object(l["a"])(D,"CreditCurrencyRate",parseFloat(this.DataDetail[p].AllocationCurrencyRate).toFixed(this.decimal)),Object(l["a"])(D,"AllocationAmt",parseFloat(this.DataDetail[p].AllocationAmt).toFixed(this.decimal)),D))}}i={OptionSeq:this.getOptionSeq().OptionSeq,LineNo:n,Data:h},a={OptionSeq:this.getOptionSeq().OptionSeq,LineNo:c,Data:s}}else{r=this.getUrlUpdateMulti(),"U",c=3;s=[];for(var m=0;m<this.DataDetail.length;m++)s.push({CreditDetailSequenceNo:this.DataDetail[m].CreditDetailSequenceNo,CreditSequenceNo:t,DebitDetailSequenceNo:this.DataDetail[m].DebitDetailSequenceNo,TotalAllocationAmt:this.replaceAllString(this.M_AR_AllocationD.totalallocatedamt,",","","number"),DebitCurrencyCd:this.M_AR_AllocationD.debitcurrencycd,CreditCurrencyCd:this.DataRowPage1.CurrencyCd,BaseCurrencyCd:this.BaseCurrencyCd,VATPaidBy:this.M_AR_AllocationD.vatpaidby,WithholdingPaidBy:this.M_AR_AllocationD.withholdingpaidby,CreditCurrencyRate:parseFloat(this.DataDetail[m].AllocationCurrencyRate).toFixed(this.decimal),CurrencyOperator:this.M_AR_AllocationD.operator,TaxCd:this.M_AR_AllocationD.taxcd,TaxType:this.DataDetail[m].TaxType,TaxClass:this.DataDetail[m].TaxTypeDescs,UserEdit:this.getDataUser().UserId});a={OptionSeq:this.getOptionSeq().OptionSeq,LineNo:c,Data:s}}0!=t&&"D"==this.M_AR_AllocationD.journalcategory?""!=o?this.postJSONMulti(o,i).then(function(t){null!=t&&(""!=r?e.postJSONMulti(r,a).then(function(t){null!=t&&e.M_Update3()}):e.M_Update3())}):""!=r&&this.postJSONMulti(r,a).then(function(t){null!=t&&e.M_Update3()}):this.postJSONMulti(r,a).then(function(t){null!=t&&e.M_Update3()})},M_Update3:function(){var t=this,e={OptionSeq:this.getOptionSeq().OptionSeq,LineNo:this.$parent.data.PageOrder,SubPortfolioCd:this.getDataUser().SubPortfolioCd,SubportfolioCd:this.getDataUser().SubPortfolioCd,CreditSequenceNo:this.DataRow.CreditSequenceNo,CreditNo:this.DataRowPage1.CreditNo,CurrencyOperator:this.M_AR_AllocationD.operator,Remarks:this.M_AR_AllocationD.remarks?this.M_AR_AllocationD.remarks:"",UserEdit:this.getDataUser().UserId,AutoUnderOver:this.M_AR_AllocationD.autounderover};this.postJSON(this.getUrlUpdate()+"2",e).then(function(e){null!=e&&(t.$parent.resultUpdate(e.Message),t.refreshListParent(!0))})},M_ClearForm:function(){var t;this.M_AR_AllocationD=(t={autounderover:"",journalcategory:"",debitno:"",trxtype:"",descs:"",headerdescs:"",debitcurrencycd:"",currencyrate:"",vatpaidby:"",withholdingpaidby:"",taxcurrencyrate:"",remarks:"",totalallocatedamt:"0",currentcurrencyrate:"",currenttaxcurrencyrate:"",operator:"",taxcd:"",rowid:0,lastupdatestamp:0,toutstandingamt:"",detailoutstandingamt:"",detailcurrencyrate:"",detailallocamt:"",outstandingamt:"",fullallocate:""},Object(l["a"])(t,"detailoutstandingamt",""),Object(l["a"])(t,"debitcurrencyrate",""),Object(l["a"])(t,"allocationamt","0"),Object(l["a"])(t,"creditcurrencyrate","0"),t),this.DataDetail=null,this.DebitCharge=[],this.TotalCharge=0,this.FnAllocationAmt=0},M_New:function(){var t=this.$store.getters.GetPage1Data;this.M_AR_AllocationD.debitcurrencycd=t.CurrencyCd},M_Edit:function(){},M_Delete:function(t){},getSpec:function(){var t=this,e={OptionFunctionCd:"GetGLSpecification",ModuleCd:"GL"};this.FnDynamicFunction(e).then(function(e){if(null!=e&&null!=e&&e.length>0){var a=e[0];t.BaseCurrencyCd=a.BaseCurrencyCd,t.DataRowPage1.CreditNo&&""!=t.DataRowPage1.CreditNo?t.DataRowPage1.CurrencyCd.toUpperCase()!=a.BaseCurrencyCd.toUpperCase()?(t.propList.initialWhere=" (CurrencyCd = '"+t.DataRowPage1.CurrencyCd+"' OR CurrencyCd = '"+a.BaseCurrencyCd+"') ",t.propList.ParamView="'"+t.getDataUser().SubPortfolioCd+"', '"+t.DataRowPage1.CreditNo+"', '"+t.DataRowPage1.DebtorCd+"'",t.FormToABSList().doGetList("","eb_getList")):(t.propList.ParamView="'"+t.getDataUser().SubPortfolioCd+"', '"+t.DataRowPage1.CreditNo+"', '"+t.DataRowPage1.DebtorCd+"'",t.FormToABSList().doGetList("","eb_getList")):(t.propList.initialWhere=" 1 = 0 ",t.propList.ParamView="'"+t.getDataUser().SubPortfolioCd+"', '"+t.DataRowPage1.CreditNo+"', '"+t.DataRowPage1.DebtorCd+"'",t.FormToABSList().doGetList("","eb_getList"))}})},getDataBy:function(t){var e=this,a={OptionFunctionCd:"SelectDebitChargesCreditAllocation2",ModuleCd:this.Module,DebitSequenceNo:t.DebitSequenceNo,CreditNo:this.DataRowPage1.CreditNo,SubPortfolioCd:this.getDataUser().SubPortfolioCd};this.FnDynamicFunction(a).then(function(a){if(null!=a){console.log(a);var i=[];e.DataDetail=a;for(var r=0,l=0;l<a.length;l++)r+=parseFloat(a[l].ChargeAmt),i.push({data:{outstanding:e.isCurrency(a[l].ChargeAmt,e.decimal),currencyrate:e.isCurrency(a[l].CurrencyRate,e.decimal),allocamt:e.isCurrency(a[l].AllocationAmt,e.decimal),alloccurrencyrate:e.isCurrency(a[l].AllocationCurrencyRate,e.decimal)},props:{label:{cLabel:a[l].TaxTypeDescs,cLabelSize:4,cValue:"",cPageLevel:e.PageLevel,cTabIndex:e.TabIndex,cVisible:!0,cClass:"lbl-col-align"},outstanding:{cValidate:"",cName:"outstanding_"+(l+1),cLabel:"",cLabelSize:4,cOrder:102,cKey:!1,cType:"decimal",cVisible:!0,cProtect:!0,cPageLevel:e.PageLevel,cTabIndex:e.TabIndex,cParentForm:"FormScope_"+e.PageLevel+"_"+e.TabIndex,cRowDisable:[]},currencyrate:{cValidate:"",cName:"currencyrate_"+(l+1),cLabel:"",cLabelSize:4,cOrder:102,cKey:!1,cType:"decimal",cVisible:!0,cProtect:!0,cPageLevel:e.PageLevel,cTabIndex:e.TabIndex,cParentForm:"FormScope_"+e.PageLevel+"_"+e.TabIndex,cRowDisable:[]},allocamt:{cValidate:"",cName:"allocamt_"+(l+1),cLabel:"",cLabelSize:4,cOrder:102,cKey:!1,cType:"decimal",cVisible:!0,cProtect:!1,cPageLevel:e.PageLevel,cTabIndex:e.TabIndex,cParentForm:"FormScope_"+e.PageLevel+"_"+e.TabIndex,cRowDisable:[]},alloccurrencyrate:{cValidate:"",cName:"alloccurrencyrate_"+(l+1),cLabel:"",cLabelSize:4,cOrder:102,cKey:!1,cType:"decimal",cVisible:!0,cProtect:!0,cPageLevel:e.PageLevel,cTabIndex:e.TabIndex,cParentForm:"FormScope_"+e.PageLevel+"_"+e.TabIndex,cRowDisable:[]}}});e.TotalCharge=r,e.DebitCharge=i;var o={OptionSeq:e.getOptionSeq().OptionSeq,LineNo:e.$parent.data.PageOrder,currencycd:t.CurrencyCd,debitsequenceno:t.DebitSequenceNo,creditsequenceno:t.CreditSequenceNo,creditno:e.DataRowPage1.CreditNo,debtorcd:e.DataRowPage1.DebtorCd,SubportfolioCd:e.getDataUser().SubPortfolioCd};e.postEncode(e.getUrlById(),o).then(function(a){if(null!=a){var i=a.Data[0];e.M_AR_AllocationD={autounderover:"",journalcategory:i.journalcategory,debitno:i.debitno,trxtype:i.trxtype,descs:i.descs,headerdescs:i.headerdescs,debitcurrencycd:i.currencycd,currencyrate:i.currencyrate,vatpaidby:i.vatpaidby,withholdingpaidby:i.withholdingpaidby,taxcurrencyrate:i.taxcurrencyrate,remarks:i.remarks,totalallocatedamt:e.isCurrency(i.totalallocatedamt,e.decimal),currentcurrencyrate:i.currentcurrencyrate,currenttaxcurrencyrate:i.currenttaxcurrencyrate,operator:i.operator,taxcd:i.taxcd,rowid:i.rowid,lastupdatestamp:t.LastUpdateStamp,toutstandingamt:i.toutstandingamt,detailoutstandingamt:i.detailoutstandingamt,detailcurrencyrate:i.detailcurrencyrate,detailallocamt:i.detailallocamt,outstandingamt:t.OutstandingAmt,fullallocate:i.totalallocatedamt>0?"Y":"N",debitcurrencyrate:i.debitcurrencyrate,allocationamt:i.allocationamt,creditcurrencyrate:i.creditcurrencyrate},e.IEBy.Input=i.userinput,e.IEBy.Edit=i.useredit}})}})},FullAllocate:function(){"Y"==this.M_AR_AllocationD.fullallocate?(this.FnAllocationAmt=this.M_AR_AllocationD.outstandingamt,AutoSplitAllocationAmount()):(this.FnAllocationAmt=0,AutoSplitAllocationAmount())},AutoSplitAllocationAmount:function(){for(var t=this.FnAllocationAmt,e=2,a=0,i=0,r=0,l=0,o=[],c=[],n=0;n<this.DataDetail.length;n++)this.DataDetail[n].ChargeAmt&&""!=this.DataDetail[n].ChargeAmt&&(o.push(this.DataDetail[n].ChargeAmt),a+=parseFloat(this.DataDetail[n].ChargeAmt)),this.DataDetail[n].AllocationAmt&&""!=this.DataDetail[n].AllocationAmt&&c.push(this.DataDetail[n].AllocationAmt);if(0==c.length)return!1;if(0==t)for(var s=0;s<c.length;s++)c[s].value=0;else{i=t,i=this.replaceAllString(i,",","","number");for(var d=0;d<c.length;d++)parseFloat(i)<=0?c[d].value=0:parseFloat(a)>parseFloat(i)?c[d].value=o[d]/a*i:c[d].value=o[d];r=0;for(var u=0;u<c.length;u++)h=c[u].value,h=this.replaceAllString(h,",","","number"),r+=parseFloat(h)}if(l=i-r,0!=l){var h;l*=Math.pow(10,e),l=Math.round(l),l*=Math.pow(10,-1*e);for(var p=0;p<c.length;p++)if(h=c[p].value,h=this.replaceAllString(h,",","","number"),parseFloat(h)+parseFloat(l)<=parseFloat(o[p])){c[p].value=parseFloat(h)+parseFloat(l);break}}},OntotalallocateamtChange:function(t){if(t<=0||""==t)for(var e=0;e<this.DebitCharge.length;e++)this.DebitCharge[e].data.allocamt=this.isCurrency(0,this.decimal);else for(var a=0;a<this.DebitCharge.length;a++){var i=parseFloat(this.replaceAllString(this.DebitCharge[a].data.outstanding,",","","number"))/parseFloat(this.TotalCharge)*parseFloat(this.replaceAllString(t,",","","number"));this.DebitCharge[a].data.allocamt=this.isCurrency(i,this.decimal)}},handleInput:function(t,e,a){"text"==this.DebitCharge[t].props[a].cType?e&&(this.DebitCharge[t].data[a]=e.toString()):this.DebitCharge[t].data[a]=e},formatNumber:function(t,e,a,i){t=t||window.event;var r=t.which?t.which:t.keyCode;if("decimal"==this.DebitCharge[e].props[i].cType||"numeric"==this.DebitCharge[e].props[i].cType)if(r>31&&(r<48||r>57)&&46!==r)t.preventDefault();else if(46==r)if("numeric"==this.DebitCharge[e].props[i].cType)t.preventDefault();else{var l=this.DebitCharge[e].data[i];if(-1===l.indexOf("."))return!0;t.preventDefault()}else{if(!(r>64&&r<91||r>96&&r<123||8==r||32==r))return!0;t.preventDefault()}else if(13==r)return!0},isCurrency2:function(t,e,a){if("decimal"==this.DebitCharge[t].props[a].cType&&""!==this.DebitCharge[t].data[a]){var i=this.replaceAllString(this.DebitCharge[t].data[a],",","","number"),r=null;if(i.toString().indexOf(".")>-1)if(r=i.toString().split("."),r[1].length<this.DebitCharge[t].props[a].cDecimal);else{var l=parseFloat(i).toFixed(this.DebitCharge[t].props[a].cDecimal),o=l.toString().split(".");r[0]=o[0],r[1]=o[1]}else r=[i,"00"];var c=r[0]&&""!=r[0]?r[0]:0,n="."+r[1];this.DebitCharge[t].data[a]=c.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+n}}},created:function(){},beforeMount:function(){},mounted:function(){this.hideSideBarMenu()},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}},c=o,n=a("2877"),s=Object(n["a"])(c,i,r,!1,null,null,null);s.options.__file="AR_AllocationD.vue";e["default"]=s.exports}}]);
//# sourceMappingURL=chunk-2d0aad34.5a15c683.js.map